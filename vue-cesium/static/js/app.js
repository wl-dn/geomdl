(function(e){function t(t){for(var a,r,l=t[0],s=t[1],c=t[2],d=0,m=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],a=!0,l=1;l<i.length;l++){var s=i[l];0!==n[s]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},n={app:0},o=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"01c5":function(e,t,i){},"03a6":function(e,t,i){},"03be":function(e,t,i){"use strict";i("b5cf")},"042e":function(e,t,i){},"04dc":function(e,t,i){},"0513":function(e,t,i){},1:function(e,t){},1294:function(e,t,i){"use strict";i("58ad")},"150b":function(e,t,i){},1927:function(e,t,i){e.exports=i.p+"static/img/red.png"},"195d":function(e,t,i){},"1d4f":function(e,t,i){"use strict";i("cfd0")},"1de70":function(e,t,i){e.exports=i.p+"static/img/green.png"},"1e3b":function(e,t,i){e.exports=i.p+"static/img/yellow.png"},2:function(e,t){},23845:function(e,t,i){e.exports=i.p+"static/img/orange.png"},2395:function(e,t,i){},"30f5":function(e,t,i){},3303:function(e,t,i){"use strict";i("3e72")},3459:function(e,t,i){"use strict";i("710b")},"3a36":function(e,t,i){},"3c2a":function(e,t,i){"use strict";i("ad62")},"3e72":function(e,t,i){},"3e89":function(e,t,i){"use strict";i("042e")},"429a":function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="429a"},"42de":function(e,t,i){"use strict";i("e156")},4356:function(e,t,i){"use strict";i("195d")},"4b6c":function(e,t,i){},"4c6c":function(e,t,i){"use strict";i("60ab")},"4fb8":function(e,t,i){"use strict";i("30f5")},"54b7":function(e,t,i){"use strict";i("3a36")},5593:function(e,t,i){"use strict";i("6cff")},"55d89":function(e,t,i){"use strict";i("efb5")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],r=(i("7c55"),i("2877")),l={},s=Object(r["a"])(l,n,o,!1,null,null,null),c=s.exports,u=i("8c4f"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home_box"},[i("div",{staticClass:"main_box",attrs:{id:"view_map"}},[i("router-view")],1)])},m=[],p={data:function(){return{cesiumRouterList:[{label:"地理地质信息系统测试平台",index:"三维地质模型",children:[{index:"adjust3DTiles",label:"三维地质模型"},{index:"mdlScene",label:"模型分析"}]}],activeItem:"adjust3DTiles",isShowAsideBox:!0}},watch:{$route:function(e,t){this.changeActiveItem(e.path)}},components:{},methods:{changeActiveItem:function(e){var t=e.substring(1);this.activeItem=t}},created:function(){this.changeActiveItem(this.$route.path)}},h=p,v=(i("1294"),i("4fb8"),Object(r["a"])(h,d,m,!1,null,"3584a3ce",null)),f=v.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"cesiumContainer"}})},y=[],b=i("d4ec"),w=i("bee2"),C=i("ade3"),D=(i("b680"),i("ec35")),_=function(){function e(){Object(b["a"])(this,e)}return Object(w["a"])(e,null,[{key:"initCesium",value:function(e){var t={geocoder:e,homeButton:e,timeline:e,navigationHelpButton:e,sceneModePicker:e,fullscreenButton:e,creditsDisplay:e,baseLayerPicker:e,animation:e};return t}},{key:"zoomOut",value:function(e){var t=e.camera.position,i=e.scene.globe.ellipsoid,a=i.cartesianToCartographic(t),n=a.height,o=parseFloat(D["B"].toDegrees(a.longitude).toFixed(8)),r=parseFloat(D["B"].toDegrees(a.latitude).toFixed(8));e.camera.flyTo({destination:D["g"].fromDegrees(o,r,n/1.8),duration:1})}},{key:"zoomIn",value:function(e){var t=e.camera.position,i=e.scene.globe.ellipsoid,a=i.cartesianToCartographic(t),n=a.height,o=parseFloat(D["B"].toDegrees(a.longitude).toFixed(8)),r=parseFloat(D["B"].toDegrees(a.latitude).toFixed(8));e.camera.flyTo({destination:D["g"].fromDegrees(o,r,1.8*n),duration:1})}},{key:"resetView",value:function(e,t,i,a,n,o,r){n=n||348.4202942851978,o=o||-89.74026687972041,r=r||0,e.camera.flyTo({destination:D["g"].fromDegrees(t,i,a),orientation:{heading:D["B"].toRadians(n),pitch:D["B"].toRadians(o),roll:D["B"].toRadians(r)},complete:function(){}})}},{key:"taggleUnderSpace",value:function(e){e.scene.screenSpaceCameraController.enableCollisionDetection=!e.scene.screenSpaceCameraController.enableCollisionDetection}},{key:"taggleFullScreen",value:function(e){e?D["r"].requestFullscreen(document.body):D["r"].exitFullscreen()}},{key:"taggleEarthShow",value:function(e){e.scene.globe.show=!e.scene.globe.show,e.scene.skyBox.show=!1,e.scene.sun.show=!1,e.scene.moon.show=!1,e.scene.undergroundMode=!0,e.scene.globe.baseColor=new D["n"](0,0,0,0),e.scene.backgroundcolor=new D["n"](0,0,0,0)}},{key:"changeTerrainAlpha",value:function(e,t){e.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=D["B"].clamp(t,0,1)}},{key:"getTreeLayerData",value:function(e,t){if(e.children)for(var i=0;i<e.children.length;i++){var a=e.children[i];this.createTreeLayerData(a,t)}else{var n=JSON.parse(JSON.stringify(e));t.push(n)}}},{key:"getMapLevel",value:function(e){return e>48e6?0:e>24e6?1:e>12e6?2:e>6e6?3:e>3e6?4:e>15e5?5:e>75e4?6:e>375e3?7:e>187500?8:e>93750?9:e>46875?10:e>23437.5?11:e>11718.75?12:e>5859.38?13:e>2929.69?14:e>1464.84?15:e>732.42?16:e>366.21?17:18}}]),e}(),S=i("1da1"),k=(i("96cf"),i("a9e3"),i("b0c0"),i("159b"),i("d81d"),i("595b")),x=function(){function e(t){Object(b["a"])(this,e),this._viewer=t,this._excavateMinHeight=9999}return Object(w["a"])(e,[{key:"drawPointEntity",value:function(e,t){t=t||{};var i=this._viewer.entities.add({name:"点几何对象",position:D["g"].fromDegrees(e[0],e[1],0),point:{color:D["n"].SKYBLUE,pixelSize:10,outlineColor:D["n"].YELLOW,outlineWidth:3,disableDepthTestDistance:Number.POSITIVE_INFINITY}});return console.log(i),i}},{key:"drawPolyLineEntity",value:function(e,t){if(!(e.length<1)){t=t||{};var i=this._viewer.entities.add({name:"线几何对象",polyline:{positions:e,width:t.width?t.width:5,material:new D["I"]({color:t.color?new D["n"].fromCssColorString(t.color):D["n"].GOLD}),depthFailMaterial:new D["I"]({color:t.color?new D["n"].fromCssColorString(t.color):D["n"].GOLD})}});return i}}},{key:"drawPolygonEntity",value:function(e,t){if(!(e.length<2)){t=t||{};var i=this._viewer.entities.add({id:"1-1",name:"面几何对象",polygon:{height:.1,hierarchy:new D["H"](e),material:t.color?new D["n"].fromCssColorString(t.color).withAlpha(.2):new D["n"].fromCssColorString("#FFD700").withAlpha(.2),outline:!0,outlineWidth:1}});return i}}},{key:"getPolygonListById",value:function(e,t){t=t||{};var i=this._viewer.entities.getById(e);return i?(t.positionData=i.polygon.hierarchy["_value"].positions,t.name=i.name,t):null}},{key:"getPolygonDataByEntity",value:function(e){var t={};return e?(t.positionData=e.polygon.hierarchy["_value"].positions,t.name=e.name,t):null}},{key:"drawTerrianDig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.length<3||t.lerpInterval<0||(this._createClipTerrian(e),t.minHeight=this._getMinPointHeight(e,t.height),this._createBottomSurface(e,t.bottomMaterial,t.minHeight),this._createShaftWall(e,t.bottomMaterial,t.minHeight,t.lerpInterval))}},{key:"_createClipTerrian",value:function(e){for(var t=this._judgeDirection(e),i=e.length,a=[],n=0;n<i;++n){var o=(n+1)%i,r=D["g"].normalize(e[n],new D["g"]),l=t?D["g"].subtract(e[o],e[n],new D["g"]):D["g"].subtract(e[n],e[o],new D["g"]);l=D["g"].normalize(l,l);var s=D["g"].cross(l,r,new D["g"]);s=D["g"].normalize(s,s),a.push(new D["l"](s,0))}this._viewer.scene.globe.clippingPlanes=new D["m"]({planes:a,edgeWidth:1,edgeColor:D["n"].WHITE})}},{key:"_createBottomSurface",value:function(e,t,i){var a=new D["x"]({image:t,repeat:new D["f"](5,5)}),n=new D["q"]({polygon:{hierarchy:new D["H"](e),height:i,material:a}});this._viewer.entities.add(n)}},{key:"_createShaftWall",value:function(e,t,i,a){for(var n=a,o=e.length,r=[],l=0;l<o;l++)for(var s=(l+1)%o,c=D["h"].fromCartesian(e[l]),u=D["h"].fromCartesian(e[s]),d=[c.longitude,c.latitude],m=[u.longitude,u.latitude],p=0;p<n;p++){var h=D["B"].lerp(d[0],m[0],p/n),v=D["B"].lerp(d[1],m[1],p/n);r.push(new D["h"](h,v))}r.push(r[0].clone()),this._createWellWall(r,t,i)}},{key:"_createWellWall",value:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(t,i,a){var n,o,r,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],o=[],r=[],console.log(t),e.next=4,D["Z"](this._viewer.terrainProvider,t);case 4:t.forEach((function(e){var t=e.longitude,i=e.latitude,l=e.height;n.push(D["g"].fromRadians(t,i,l)),o.push(l),r.push(a)})),l=new D["x"]({image:i,repeat:new D["f"](5,5)}),s=new D["q"]({wall:new D["S"]({positions:n,maximumHeights:o,minimumHeights:r,material:l})}),this._viewer.entities.add(s);case 8:case"end":return e.stop()}}),e,this)})));function t(t,i,a){return e.apply(this,arguments)}return t}()},{key:"_judgeDirection",value:function(e){var t=D["h"].fromCartesian(e[0]),i=D["h"].fromCartesian(e[1]),a=D["h"].fromCartesian(e[2]),n=t.longitude,o=t.latitude,r=i.longitude,l=i.latitude,s=a.longitude,c=a.latitude,u=(r-n)*(c-l)-(l-o)*(s-r),d=u>0;return d}},{key:"_getMinPointHeight",value:function(e,t){var i=this;return this._excavateMinHeight=9999,e.forEach((function(e){var t=D["h"].fromCartesian(e);t.height<i._excavateMinHeight&&(i._excavateMinHeight=t.height)})),this._excavateMinHeight-t}},{key:"createPointBuffer",value:function(e,t){this.drawPointEntity(e);var i=k["point"](e),a=k["buffer"](i,t,{units:"meters"}),n=a.geometry.coordinates,o=n[0],r=this._pointsToDegreesArray(o);this._addBufferPolyogn(D["g"].fromDegreesArray(r))}},{key:"_addBufferPolyogn",value:function(e){this._viewer.entities.add({polygon:{hierarchy:new D["H"](e),material:D["n"].RED.withAlpha(.6),classificationType:D["k"].BOTH}})}},{key:"_pointsToDegreesArray",value:function(e){var t=[];return e.map((function(e){t.push(e[0]),t.push(e[1])})),t}},{key:"caculateLL",value:function(e,t,i,a){var n=e*Math.PI/180,o=i*Math.PI/180,r=n-o,l=t*Math.PI/180-a*Math.PI/180,s=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(l/2),2)));return s*=6378.137,s=Math.round(1e4*s)/10,s}}]),e}(),T=function(){function e(t,i){Object(b["a"])(this,e),this.boundingSphereCenter=i,this.modelMatrix=t}return Object(w["a"])(e,[{key:"translationMdl",value:function(e,t,i){var a=new D["D"],n=D["h"].fromCartesian(this.boundingSphereCenter),o=D["g"].fromRadians(n.longitude,n.latitude,n.height),r=D["g"].fromDegrees(e,t,i),l=D["g"].subtract(r,o,new D["g"]);return a=D["D"].fromTranslation(l,new D["D"]),a}},{key:"rotationMdl",value:function(e,t,i){var a=new D["D"],n=D["C"].fromRotationX(D["B"].toRadians(e)),o=D["C"].fromRotationY(D["B"].toRadians(t)),r=D["C"].fromRotationZ(D["B"].toRadians(i)),l=new D["C"];return D["C"].multiply(n,o,l),D["C"].multiply(l,r,l),a=this._getRotateMatrix4(l),a}},{key:"scaleMdl",value:function(e,t,i){e=1,i=1;var a=new D["D"],n=new D["g"](e,t,i),o=D["D"].fromScale(n,new D["D"]),r=D["D"].fromTranslation(this.boundingSphereCenter),l=D["g"].multiplyByScalar(this.boundingSphereCenter,-1,new D["g"]),s=D["D"].fromTranslation(l),c=D["D"].multiply(o,s,new D["D"]);return a=D["D"].multiply(r,c,new D["D"]),a}},{key:"_getRotateMatrix4",value:function(e){var t=D["D"].getMatrix3(this.modelMatrix,new D["C"]),i=D["C"].inverse(t,new D["C"]),a=D["D"].getTranslation(this.modelMatrix,new D["g"]),n=D["O"].eastNorthUpToFixedFrame(this.boundingSphereCenter),o=D["D"].getMatrix3(n,new D["C"]),r=D["D"].getTranslation(n,new D["g"]),l=D["D"].fromTranslation(D["g"].subtract(a,r,new D["g"]),new D["D"]),s=D["D"].fromRotationTranslation(D["C"].inverse(D["C"].multiply(i,o,new D["C"]),new D["D"])),c=D["D"].fromRotationTranslation(e);return D["D"].multiply(n,c,n),D["D"].multiply(n,s,n),D["D"].multiply(n,l,n),n}}]),e}(),I=function(){function e(){Object(b["a"])(this,e)}return Object(w["a"])(e,null,[{key:"viewCesiumUtils",value:function(){return _}},{key:"drawUtils",value:function(e){return new x(e)}},{key:"transformUtils",value:function(e,t){return new T(e,t)}}]),e}();Object(C["a"])(I,"initMap",_.initCesium);i("b08e");var M=i("5a89"),R=i("4721"),A=function(){function e(){Object(b["a"])(this,e)}return Object(w["a"])(e,null,[{key:"initScene",value:function(e){var t=new M["hb"](75,e.clientWidth/e.clientHeight,.1,1e10);t.position.set(4e4,4e3,4e3);var i=new M["vb"],a=new M["b"](13421772,.6);i.add(a);var n=new M["p"](16777215,1);t.add(n),i.add(t);var o=new M["d"](250);i.add(o);var r=new M["Kb"]({antialias:!0});r.setPixelRatio(window.devicePixelRatio),r.setSize(e.clientWidth,e.clientHeight),r.setClearColor(2503224),r.localClippingEnabled=!0,e.appendChild(r.domElement),r.render(i,t);var l=new R["a"](t,r.domElement);return l.minDistance=1.5,{scene:i,camera:t,renderer:r,controls:l}}},{key:"getSphereCenter",value:function(e){return!!e&&e.cached.sphere.center}}]),e}(),O={data:function(){return{}},components:{},methods:{},mounted:function(){var e=!1;viewer=new D["R"]("cesiumContainer",{geocoder:e,homeButton:e,timeline:e,navigationHelpButton:e,sceneModePicker:e,fullscreenButton:e,creditsDisplay:e,baseLayerPicker:e,animation:e,shadows:!1,imageryProvider:new D["N"]({url:"GlobalBkLayer.jpg"})}),Viewer._cesiumWidget._creditContainer.style.display="none"}},L=O,P=Object(r["a"])(L,g,y,!1,null,"2e20bea6",null),F=P.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cesiumWedgit_box",attrs:{id:"cesiumContainer"}},[i("div",{staticClass:"wedgit_box"},[i("ul",e._l(e.wedgitList,(function(t,a){return i("li",{key:a},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isChecked,expression:"item.isChecked"}],attrs:{id:"select_all",name:"select_all",type:"checkbox"},domProps:{checked:Array.isArray(t.isChecked)?e._i(t.isChecked,null)>-1:t.isChecked},on:{change:[function(i){var a=t.isChecked,n=i.target,o=!!n.checked;if(Array.isArray(a)){var r=null,l=e._i(a,r);n.checked?l<0&&e.$set(t,"isChecked",a.concat([r])):l>-1&&e.$set(t,"isChecked",a.slice(0,l).concat(a.slice(l+1)))}else e.$set(t,"isChecked",o)},function(i){return e.handleChange(t)}]}}),i("span",[e._v(" "+e._s(t.name)+" ")])])})),0)])])},B=[],H={data:function(){return{wedgitList:[{id:1,name:"搜索控件",attribute:"geocoder",isChecked:!0},{id:2,name:"复位控件",attribute:"homeButton",isChecked:!0},{id:3,name:"时间滚动条控件",attribute:"timeline",isChecked:!0},{id:5,name:"切换视角控件 ",attribute:"sceneModePicker",isChecked:!0},{id:6,name:"全屏控件 ",attribute:"fullscreenButton",isChecked:!0},{id:7,name:"底图切换控件 ",attribute:"baseLayerPicker",isChecked:!0},{id:8,name:"动画控件 ",attribute:"animation",isChecked:!0},{id:9,name:"版本控件",attribute:"CreditsDisplay",isChecked:!0},{id:4,name:"提示控件",attribute:"navigationHelpButton",isChecked:!0}],viewerOption:{geocoder:!1,homeButton:!1,timeline:!1,navigationHelpButton:!1,sceneModePicker:!1,fullscreenButton:!1,scene3DOnly:!0,baseLayerPicker:!1,animation:!1},cesiumViewer:null,cesiumTool:null}},components:{},methods:{initMap:function(){this.cesiumViewer=new D["R"]("cesiumContainer")},handleChange:function(e){var t="_"+e.attribute;console.log(t);var i=e.id;1===i||6===i||8===i?e.isChecked?this.cesiumViewer[t]._container.style.display="inline-block":this.cesiumViewer[t]._container.style.display="none":2===i||7===i?e.isChecked?this.cesiumViewer[t]._element.style.display="inline-block":this.cesiumViewer[t]._element.style.display="none":3===i?e.isChecked?this.cesiumViewer[t].container.style.display="inline-block":this.cesiumViewer[t].container.style.display="none":4===i?e.isChecked?this.cesiumViewer[t]._container.childNodes[5].style.display="inline-block":this.cesiumViewer[t]._container.childNodes[5].style.display="none":5===i?e.isChecked?this.cesiumViewer[t]._container.childNodes[2].style.display="inline-block":this.cesiumViewer[t]._container.childNodes[2].style.display="none":9===i&&(e.isChecked?this.cesiumViewer._cesiumWidget._creditContainer.style.display="inline-block":this.cesiumViewer._cesiumWidget._creditContainer.style.display="none")}},mounted:function(){this.initMap()}},j=H,V=(i("42de"),Object(r["a"])(j,E,B,!1,null,"591b3cf9",null)),W=V.exports,N=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},U=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"geoMdl_box"},[i("div",{attrs:{id:"cesiumContainer"}})])}],z=null,G={data:function(){return{}},components:{},methods:{initCesium:function(){z=new D["R"]("cesiumContainer",{terrainProvider:D["W"]()});var e=new D["j"]({url:"http://10.101.140.3/CesiumData/3DTiles/testTile/tileset.json"});z.scene.globe.depthTestAgainstTerrain=!0,e.readyPromise.then((function(e){z.scene.primitives.add(e);var t=e.modelMatrix.clone(),i=e.boundingSphere.center;console.log(i);var a=I.transformUtils(t,i),n=a.translationMdl(109.3062,21.66081,500),o=a.rotationMdl(17.9,-7.3,0),r=D["D"].multiply(n,o,new D["D"]);e.modelMatrix=r})),z.zoomTo(e)},getRotateMatrix4:function(e,t,i){var a=D["D"].clone(t),n=D["D"].fromArray(D["D"].toArray(a)),o=D["D"].getMatrix3(n,new D["C"]),r=D["C"].inverse(o,new D["C"]),l=D["D"].getTranslation(n,new D["g"]),s=D["O"].eastNorthUpToFixedFrame(i);console.log(s);var c=D["D"].getMatrix3(s,new D["C"]),u=D["D"].getTranslation(s,new D["g"]),d=D["D"].fromTranslation(D["g"].subtract(l,u,new D["g"]),new D["D"]),m=D["D"].fromRotationTranslation(D["C"].inverse(D["C"].multiply(r,c,new D["C"]),new D["D"])),p=D["D"].fromRotationTranslation(e);return D["D"].multiply(s,p,s),D["D"].multiply(s,m,s),D["D"].multiply(s,d,s),s}},mounted:function(){this.initCesium()}},q=G,Y=(i("c387"),Object(r["a"])(q,N,U,!1,null,"1f2d3e2b",null)),$=Y.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"cesiumContainer"}})},K=[],J={data:function(){return{loadBIM3DTitles:function(){var e=new D["R"]("cesiumContainer",{terrainProvider:D["W"]()});e.scene.globe.depthTestAgainstTerrain=!0;var t=e.scene;t.globe.show=!1,e.extend(D["ab"]);var i=t.primitives.add(new D["j"]({url:D["z"].fromAssetId(8564)}));i.readyPromise.then((function(t){console.log(t.boundingSphere.radius),e.zoomTo(t,new D["t"](.5,-.2,8*t.boundingSphere.radius))})).otherwise((function(e){console.log(e)}))}}},components:{},mounted:function(){this.loadBIM3DTitles()}},Z=J,Q=Object(r["a"])(Z,X,K,!1,null,"08426ba3",null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"cesiumContainer"}},[e._m(0),i("div",{staticClass:"class_title"},[e._v("地理地质信息系统测试平台")]),i("div",{staticClass:"cesiumMenu_box"},[i("ul",e._l(e.cesiumMenuList,(function(t,a){return i("li",{key:a,class:{active:e.activeIndex===t.id},on:{click:function(i){return e.activeMenuItemOnClick(t)}}},[i("span",{class:["iconfont",t.icon]},[e._v(e._s(t.label))])])})),0)]),i("div",{staticClass:"cesiumContent_box"},[i("mapView",{directives:[{name:"show",rawName:"v-show",value:1===e.activeIndex,expression:"activeIndex === 1"}],on:{sendTree2dViewInfo:e.recept2dViewInfo}}),i("mdlView",{directives:[{name:"show",rawName:"v-show",value:2===e.activeIndex,expression:"activeIndex === 2"}],on:{sendTree3dViewInfo:e.recept3dViewInfo}}),3===e.activeIndex?i("mdlFenxi",{on:{sendFenxiInfo:e.receptFenxiInfo}}):e._e(),4===e.activeIndex?i("div",{staticClass:"mdlTool_box"},[i("el-select",{attrs:{placeholder:"请选择模型"},on:{change:e.selectOnMdlchange},model:{value:e.mdlNameValue,callback:function(t){e.mdlNameValue=t},expression:"mdlNameValue"}},e._l(e.mdlOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1),i("cesiumCommonTool",{attrs:{isCesiumCommonToolVisible:e.isCesiumCommonToolVisible},on:{commonToolHandleOnClick:e.commonToolHandleOnClick}}),i("adjustMdlComponent",{directives:[{name:"show",rawName:"v-show",value:e.isShowTool,expression:"isShowTool"}],attrs:{isWireframevCheck:e.isWireframevCheck},on:{sendWifeinfo:e.receptWifeinfo}},[e._v("/")]),i("holeLayerInfo",{attrs:{drillname:e.drillName,layerInfo:e.layerInfo,isVisible:e.isLayerDialogVisible},on:{sendCloseLayerDialog:function(t){e.isLayerDialogVisible=!1}}}),i("virtualBox",{attrs:{virtualLayerInfo:e.virtualLayerInfo,fieldsList:e.fieldsList,isVisible:e.isvirtualLayerDialogVisible,tableTheme:e.virtualTableTheme},on:{sendCloseVirtualDialog:function(t){e.isvirtualLayerDialogVisible=!1}}}),i("commonTableBox",{attrs:{tableData:e.tableCommonData,isCommonVisible:e.isCommonVisible,tableTheme:e.tableTitleTheme},on:{sendCommonCloseInfo:function(t){e.isCommonVisible=!1}}}),i("searchBar",{on:{sendSearchParmsFromSerachBar:e.receptSearchInfo,sendResultItemFromSearchCompent:e.receptCommonFromSearchCompent,sendLayerSearchInfo:e.receptLayerSearchInfoFromSearchCompent,sendResetInfoEvent:e.receptResetInfoEvent,sendLayerItemFromSearchCompent:e.receptLayerItemFromSearchCompent}}),i("bottomTool",{on:{sendAlphaInfo:e.receptAlphaInfo,sendImageryAlpha:e.receptImageryAlpha}})],1)},ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo_class"},[a("img",{attrs:{src:i("a309")}})])}],ae=(i("a434"),i("b64b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"adjustMdlBox"},[i("div",[i("span",[e._v("线框/实体")]),i("el-checkbox",{on:{change:e.WireOnChange},model:{value:e.isWireframevCheck,callback:function(t){e.isWireframevCheck=t},expression:"isWireframevCheck"}})],1),i("div",[i("span",[e._v("比例(Z)")]),i("el-input-number",{attrs:{label:"描述文字",step:.1},model:{value:e.tileModelTool.scale,callback:function(t){e.$set(e.tileModelTool,"scale",t)},expression:"tileModelTool.scale"}})],1),i("div",[i("span",[e._v("经度")]),i("el-input-number",{attrs:{label:"描述文字",step:1e-4},model:{value:e.tileModelTool.longitude,callback:function(t){e.$set(e.tileModelTool,"longitude",t)},expression:"tileModelTool.longitude"}})],1),i("div",[i("span",[e._v("纬度")]),i("el-input-number",{attrs:{label:"描述文字",step:1e-4},model:{value:e.tileModelTool.latitude,callback:function(t){e.$set(e.tileModelTool,"latitude",t)},expression:"tileModelTool.latitude"}})],1),i("div",[i("span",[e._v("高度")]),i("el-slider",{attrs:{min:-1e4,max:1e4},model:{value:e.tileModelTool.height,callback:function(t){e.$set(e.tileModelTool,"height",t)},expression:"tileModelTool.height"}})],1),i("div",[i("span",[e._v("绕x轴旋转")]),i("el-slider",{attrs:{min:-180,max:180},model:{value:e.tileModelTool.rotateX,callback:function(t){e.$set(e.tileModelTool,"rotateX",t)},expression:"tileModelTool.rotateX"}})],1),i("div",[i("span",[e._v("绕y轴旋转")]),i("el-slider",{attrs:{min:-180,max:180},model:{value:e.tileModelTool.rotateY,callback:function(t){e.$set(e.tileModelTool,"rotateY",t)},expression:"tileModelTool.rotateY"}})],1),i("div",[i("span",[e._v("绕z轴旋转")]),i("el-slider",{attrs:{min:-180,max:180},model:{value:e.tileModelTool.rotateZ,callback:function(t){e.$set(e.tileModelTool,"rotateZ",t)},expression:"tileModelTool.rotateZ"}})],1)])}),ne=[],oe={props:["isWireframevCheck"],data:function(){return{}},components:{},computed:{tileModelTool:function(){return this.$store.getters.getTileMdlTool}},methods:{WireOnChange:function(e){this.$emit("sendWifeinfo",e)},onMessageFromComponent:function(){},destroyComponent:function(){}},created:function(){},mounted:function(){},beforeDestroy:function(){}},re=oe,le=(i("c1dd"),Object(r["a"])(re,ae,ne,!1,null,"a1572f58",null)),se=le.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mapView"},[i("el-tree",{attrs:{props:e.props,data:e.treeData,"show-checkbox":"","node-key":"id","default-expanded-keys":["1","2","3","4","5","6","7","8"]},on:{"check-change":e.handleCheckChange,check:e.handleCheck,"node-contextmenu":e.handleContextMenu}}),i("mapRightDialog",{attrs:{isShowDialog:e.isShowDialog,positionX:e.positionX,positionY:e.positionY,nodeData:e.nodeData},on:{sendCloseR:function(t){e.isShowDialog=!1}}})],1)},ue=[],de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShowDialog?i("div",{staticClass:"rightClickBox",on:{mouseleave:e.handleMouseClose}},[i("ul",e._l(e.rightClickList,(function(t,a){return i("li",{key:a,on:{click:function(i){return e.clickSendFunc(t.id)}}},[i("span",{class:t.icon}),e._v(" "+e._s(t.name)+" ")])})),0)]):e._e()},me=[];a["default"].prototype.pointArray=[];var pe=new a["default"],he={props:["positionX","positionY","isShowDialog","nodeData"],watch:{positionX:function(e){var t=this;this.$nextTick((function(){t.moveDialog()}))},nodeData:function(e){console.log(e)}},computed:{},data:function(){return{rightClickList:[{id:1,icon:"el-icon-top-right icon_span",name:"打开"},{id:2,icon:"el-icon-download   icon_span",name:"下载"},{id:3,icon:"el-icon-delete icon_span",name:"删除"},{id:4,icon:"el-icon-edit icon_span",name:"重命名"}]}},components:{},methods:{moveDialog:function(){var e=document.getElementsByClassName("rightClickBox")[0];e.style.top=this.positionX+"px",e.style.left=this.positionY+"px"},clickSendFunc:function(e){pe.$emit("sendRightFunc",e)},handleMouseClose:function(){this.$emit("sendCloseR",!1)}},created:function(){},mounted:function(){}},ve=he,fe=(i("54b7"),Object(r["a"])(ve,de,me,!1,null,"4f8a8bca",null)),ge=fe.exports,ye={data:function(){return{props:{label:"label",children:"children"},treeData:[{id:"1",label:"ArcGIS Server",children:[{id:"1-1",label:"MapServer",children:[{id:"1-1-1",label:"区域地质图(株洲幅)",name:"mapserver_geomap",url:"https://tsy-gis1.portal.com/server/rest/services/geoinfo_geomap/MapServer/",layers:"",serviceType:"mapserver"}]},{id:"1-2",label:"WmsServer",children:[{id:"1-2-1",label:"区域地质图(株洲幅)",name:"wmsserver_arc_geomap",url:"https://tsy-gis1.portal.com/server/services/geoinfo_geomap/MapServer/WMSServer",layers:"1,2,3,4,5,6",serviceType:"wms"}]}]},{id:"2",label:"GeoServer",children:[{id:"2-1",label:"WmsServer",children:[{id:"2-1-1",label:"区域地质图(株洲幅)",name:"geoserver_wms_geomap",url:"http://192.10.3.237/geoserver/crcc-dev/wms",layers:"crcc-dev:geomap-01",serviceType:"wms",children:[{id:"2-1-1-1",label:"地层（岩体）分布",layers:"geostratumzone",name:"geostratumzone",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:geostratumzone&outputFormat=application/json",value:"geostratumzone",serviceType:"wms"},{id:"2-1-1-2",label:"围岩蚀变地层",layers:"aterationp",name:"aterationp",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:aterationp&outputFormat=application/json",value:"aterationp",serviceType:"wms"},{id:"2-1-1-3",label:"地层界线分布",layers:"geoboundzone",name:"geoboundzone",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:geoboundzone&outputFormat=application/json",value:"geoboundzone",serviceType:"wms"},{id:"2-1-1-4",label:"断层构造分布",layers:"faultzone",name:"faultzone",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:faultzone&outputFormat=application/json",value:"faultzone",serviceType:"wms"},{id:"2-1-1-5",label:"产状点",layers:"occurrence",name:"occurrence",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:occurrence&outputFormat=application/json",value:"occurrence",serviceType:"wms"},{id:"2-1-1-6",label:"围岩蚀变点",layers:"alterationt",name:"alterationt",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:alterationt&outputFormat=application/json",value:"alterationt",serviceType:"wms"}]},{id:"2-1-2",label:"长赣-遥感解译",name:"changgan_wms+geo",url:"http://192.10.3.237/geoserver/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=geomap-rs&outputFormat=application/json",layers:"geomap-rs",value:"geomap-rs",serviceType:"wms",children:[{id:"2-1-2-1",label:"地形地貌",layers:"landform",name:"landform",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:landform&outputFormat=application/json",value:"landform",serviceType:"wms"},{id:"2-1-2-2",label:"矿产开发及采空区",layers:"minegoaf",name:"minegoaf",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:minegoaf&outputFormat=application/json",value:"minegoaf",serviceType:"wms"},{id:"2-1-2-3",label:"特殊岩体",layers:"specialrocksoil",name:"specialrocksoil",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:specialrocksoil&outputFormat=application/json",value:"specialrocksoil",serviceType:"wms"},{id:"2-1-2-4",label:"不良地质",layers:"unfavorablegeology",name:"unfavorablegeology",url:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:faultzone&outputFormat=application/json",value:"unfavorablegeology",serviceType:"wms"}]}]}]},{id:"3",label:"KML",children:[{id:"3-1",label:"可研报批版-赣州段-(赣州北水东设站方案-绕避戒毒所)",name:"kml_1",url:"KML/kml_1.kml",serviceType:"kml"},{id:"3-2",label:"可研报批版-赣州段-(赣州北水东设站方案-绕避戒毒所右线绕行)",name:"kml_2.kml",url:"KML/kml_2.kml",serviceType:"kml"},{id:"3-3",label:"可研报批版-井冈山段-(替换桥隧表)",name:"kml_3.kml",url:"KML/kml_3.kml",serviceType:"kml"},{id:"3-4",label:"可研报批版-萍乡段-(萍乡北并站方案替换桥隧表)",name:"kml_4.kml",url:"KML/kml_4.kml",serviceType:"kml"},{id:"3-5",label:"可研报批版-长沙段-(机场负三层、浏阳北设站方案)",name:"kml_5.kml",url:"KML/kml_5.kml",serviceType:"kml"}]},{id:"4",label:"KMZ",children:[{id:"4-1",label:"株洲",name:"zhuzhou",url:"KMZ/zhuzhou.kmz",serviceType:"kml"}]},{id:"6",label:"影像服务",children:[{id:"6-2",label:"天地图注记",url:"http://t{s}.tianditu.com/cia_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg&tk="+this.tiandituTk,name:"TDMark",layers:"tdtCiaLayer",serviceType:"天地图"},{id:"6-5",label:"ESRI街道图",url:"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer",name:"ESRIMapCOC",layers:"vecTypeESRICOC",serviceType:"ESRI"},{id:"6-6",label:"OSM",url:"https://a.tile.openstreetmap.org/",name:"OSMMap",layers:"vecTypeOSM",serviceType:"OSM"}]},{id:"7",label:"地形服务",children:[{id:"7-1",label:"赣州段地形",url:"http://192.10.3.237:81/tsyTerrain/",serviceType:"地形服务"}]},{id:"8",label:"钻孔",url:"/getAllHoleInfo",name:"holeLayer",layer:"",serviceType:"billboards"}],currentChecked:!1,positionX:0,positionY:0,isShowDialog:!1,nodeData:null}},components:{mapRightDialog:ge},computed:{},methods:{onMessageFromComponent:function(){},destroyComponent:function(){},handleCheckChange:function(e,t){this.currentChecked=t},handleCheck:function(e,t){this.$emit("sendTree2dViewInfo",{nodeData:e,isChecked:this.currentChecked})},handleContextMenu:function(e,t){e.preventDefault(),t.children||(this.positionY=e.pageX,this.positionX=e.pageY,this.nodeData=JSON.parse(JSON.stringify(t)),this.isShowDialog=!0)}},created:function(){},mounted:function(){},beforeDestroy:function(){}},be=ye,we=(i("3e89"),Object(r["a"])(be,ce,ue,!1,null,"548e002e",null)),Ce=we.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mdlView"},[i("el-tree",{attrs:{props:e.props,data:e.treeData,"show-checkbox":"","node-key":"id","default-expanded-keys":["1","2"]},on:{"check-change":e.handleCheckChange,check:e.handleCheck,"node-contextmenu":e.handleContextMenu}}),i("mdlRightDialog",{attrs:{isShowDialog:e.isShowDialog,positionX:e.positionX,positionY:e.positionY,nodeData:e.nodeData},on:{sendCloseR:function(t){e.isShowDialog=!1}}})],1)},_e=[],Se={data:function(){return{props:{label:"label",children:"children"},treeData:[{id:"1",label:"3DTiles",children:[{id:"1-1",label:"三维地质模型",name:"3dmdl",url:"3DTiles/model_3dtiles/tileset.json",serviceType:"3DTiles"},{id:"1-2",label:"三维钻孔模型",name:"holemdl",url:"3DTiles/drill_3dtiles/tileset.json",serviceType:"3DTiles"},{id:"1-3",label:"sec-1",name:"sec1mdl",url:"3DTiles/testSecMdl/sec-1/tileset.json",serviceType:"3DTiles"},{id:"1-4",label:"sec-2",name:"sec2mdl",url:"3DTiles/testSecMdl/sec-2/tileset.json",serviceType:"3DTiles"},{id:"1-5",label:"sec-3",name:"sec3mdl",url:"3DTiles/testSecMdl/sec-3/tileset.json",serviceType:"3DTiles"}]}],currentChecked:!1,positionX:0,positionY:0,isShowDialog:!1,nodeData:null}},components:{mdlRightDialog:ge},computed:{},methods:{onMessageFromComponent:function(){},destroyComponent:function(){},handleCheckChange:function(e,t){this.currentChecked=t},handleCheck:function(e,t){this.$emit("sendTree3dViewInfo",{nodeData:e,isChecked:this.currentChecked})},handleContextMenu:function(e,t){e.preventDefault(),t.children||(this.positionY=e.pageX,this.positionX=e.pageY,this.nodeData=JSON.parse(JSON.stringify(t)),this.isShowDialog=!0)}},created:function(){},mounted:function(){},beforeDestroy:function(){}},ke=Se,xe=(i("d00f"),Object(r["a"])(ke,De,_e,!1,null,"551c39ec",null)),Te=xe.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mdlFenxi"},[i("ul",e._l(e.fenxiList,(function(t,a){return i("li",{key:a,on:{click:function(i){return e.sendInfo(t)}}},[e._v(" "+e._s(t.label)+" ")])})),0)])},Me=[],Re={data:function(){return{fenxiList:[{id:2,label:"虚拟钻孔"},{id:3,label:"清除绘制"}]}},components:{},computed:{},methods:{onMessageFromComponent:function(){},destroyComponent:function(){},sendInfo:function(e){this.$emit("sendFenxiInfo",e)}},created:function(){},mounted:function(){},beforeDestroy:function(){}},Ae=Re,Oe=(i("bcfa"),Object(r["a"])(Ae,Ie,Me,!1,null,"00c07a70",null)),Le=Oe.exports,Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isCesiumCommonToolVisible?i("div",{staticClass:"CesiumTool_box"},[i("ul",[e._l(e.toolList,(function(t,a){return[i("el-tooltip",{key:a,attrs:{effect:"dark",content:t.label,placement:"right-start"}},[i("li",{class:["iconfont",t.iconClass,{activeSpan:!0===t.active}],on:{click:function(i){return e.onClickCesiumTool(t)}}})])]}))],2)]):e._e()},Fe=[],Ee={props:["isCesiumCommonToolVisible"],data:function(){return{toolList:[{label:"地球显影",index:1,iconClass:"icon-diqiu",active:!1},{label:"地下空间",index:2,iconClass:"icon-dishangdixia",active:!1},{label:"复位",index:3,iconClass:"icon-solid-home",active:!1},{label:"放大",index:4,iconClass:"icon-jia",active:!1},{label:"缩小",index:5,iconClass:"icon-jian",active:!1},{label:"全屏",index:6,iconClass:"icon-quanping",active:!1}]}},components:{},computed:{},methods:{onClickCesiumTool:function(e){e.active=!e.active,this.$emit("commonToolHandleOnClick",e)},onMessageFromComponent:function(){},destroyComponent:function(){}},created:function(){},mounted:function(){},beforeDestroy:function(){}},Be=Ee,He=(i("3459"),Object(r["a"])(Be,Pe,Fe,!1,null,"43ca32d8",null)),je=He.exports,Ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"holefade"}},[e.isVisible?i("div",{staticClass:"holeLayerBox"},[i("div",{staticClass:"holeLayer_head_box"},[i("span",[e._v(e._s(e.drillname))]),i("span",{staticClass:"close_span",on:{click:e.closeOnClick}},[e._v("×")])]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.layerInfo,border:"",height:"350px"}},[i("el-table-column",{attrs:{prop:"stdstratumcode",label:"标准层号"}}),i("el-table-column",{attrs:{prop:"topsidedepth",label:"顶板埋深"}}),i("el-table-column",{attrs:{prop:"undersidedepth",label:"顶底埋深"}}),i("el-table-column",{attrs:{prop:"boreheight",label:"孔口标高"}}),i("el-table-column",{attrs:{prop:"qgenesis",label:"地质成因"}}),i("el-table-column",{attrs:{prop:"stratumeras",label:"地质年代"}}),i("el-table-column",{attrs:{prop:"lithology",label:"岩性"}})],1)],1):e._e()])},We=[],Ne={props:{drillname:{type:String},layerInfo:{type:Array},isVisible:{type:Boolean,default:!1}},data:function(){return{}},methods:{closeOnClick:function(){this.$emit("sendCloseLayerDialog",!1)}}},Ue=Ne,ze=(i("9371"),Object(r["a"])(Ue,Ve,We,!1,null,"214f4cba",null)),Ge=ze.exports,qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[e.isVisible?i("div",{staticClass:"virtualBox"},[i("div",{staticClass:"virtualBox_head_box"},[e._v(" "+e._s(e.tableTheme)+" "),i("span",{staticClass:"close_span",on:{click:e.closeOnClick}},[e._v("×")])]),0!==e.virtualLayerInfo.length?i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.virtualLayerInfo,border:"",height:"350px"}},[i("el-table-column",{attrs:{prop:"topElevation",label:"顶板高程"}}),i("el-table-column",{attrs:{prop:"bottomElevation",label:"底板高程"}}),i("el-table-column",{attrs:{prop:"stratCode",label:"地层编码"}}),e._v(" --\x3e "),e._v(" --\x3e ")],1):e._e()],1):e._e()])},Ye=[],$e={props:{virtualLayerInfo:{type:Array,default:function(){return[]}},fieldsList:{type:Array,default:function(){return[]}},isVisible:{type:Boolean,default:!1},tableTheme:{type:String,default:""}},data:function(){return{}},methods:{closeOnClick:function(){this.$emit("sendCloseVirtualDialog",!1)}}},Xe=$e,Ke=(i("4c6c"),Object(r["a"])(Xe,qe,Ye,!1,null,"2c008b7e",null)),Je=Ke.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchBox"},[e.isShowSearchBox?a("div",{staticClass:"searchSubBox"},[a("div",{staticClass:"searchBar"},[a("div",{class:["ladder",{ladder_selected:1===e.selectIndex}]},[a("span",{staticClass:"position_center",on:{click:function(t){e.selectIndex=1}}},[e._v("通用检索")])]),a("div",{class:["ladder",{ladder_selected:2===e.selectIndex}]},[a("span",{staticClass:"position_center",on:{click:function(t){e.selectIndex=2}}},[e._v("高级检索")])])]),a("div",{staticClass:"serachContent"},[1===e.selectIndex?a("commonSearch",e._g({on:{sendResetInfoEvent:e.receptResetInfoEvent,sendSearachResultDataEvent:e.receptSearachResultDataEvent,sendSearchInfoInwmsLayer:e.receptSearchInfoInwmsLayer}},e.$listeners)):e._e(),2===e.selectIndex?a("specialSearch"):e._e()],1),a("transition",{attrs:{name:"searchResultFade"}},[e.isSearchResultDialog?a("div",{staticClass:"searchResultBox"},[a("ul",e._l(e.resultList,(function(t,n){return a("li",{key:n,class:{activeSpan:!0===t.active},on:{click:function(i){return e.itemOnclick(t)},dblclick:function(i){return e.flyToView(t)}}},[a("div",[a("img",{attrs:{src:i("d424"),alt:""}})]),a("div",[e._v(" "+e._s(t.label)+" ")])])})),0)]):e._e()])],1):e._e(),a("div",{staticClass:"closeDialog_box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!0===e.isShowSearchBox,expression:"isShowSearchBox === true"}],on:{click:function(t){e.isShowSearchBox=!1}}},[e._v("《《")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.isShowSearchBox,expression:"isShowSearchBox === false"}],staticClass:"el-icon-search",on:{click:function(t){e.isShowSearchBox=!0}}})])])},Qe=[],et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"commonSearchBox"},[i("div",{staticClass:"commonSearchBox_left"},[i("div",[i("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("模糊查询")])],1),i("div",[i("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("图层查询")])],1),i("div",[i("el-radio",{attrs:{label:"3"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("空间检索")])],1)]),i("div",{staticClass:"commonSearchBox_right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.radio,expression:"radio == 1"}]},[i("div",{staticClass:"vaguebox"},[i("el-input",{attrs:{placeholder:"请输入钻孔编码断层地层",clearable:"","suffix-icon":"el-icon-search"},model:{value:e.vagueInput,callback:function(t){e.vagueInput=t},expression:"vagueInput"}})],1),i("div",{staticClass:"commonSearchBtn"},[i("div",{on:{click:function(t){return e.searchOnClick(1)}}},[e._v("检索")]),i("div",{on:{click:function(t){return e.resetOnClick(1)}}},[e._v("重置")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.radio,expression:"radio == 2"}],staticClass:"layerSelectBox"},[i("div",[i("span",[e._v("图层选择：")]),i("el-select",{attrs:{placeholder:"请选择图层",clearable:""},on:{change:e.layerSelectOnChange},model:{value:e.layerSelectValue,callback:function(t){e.layerSelectValue=t},expression:"layerSelectValue"}},e._l(e.layerOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",[i("span",[e._v("检索字段：")]),i("el-select",{attrs:{placeholder:"选择字段"},on:{change:e.fieldSelectOnChange},model:{value:e.fieldSelectValue,callback:function(t){e.fieldSelectValue=t},expression:"fieldSelectValue"}},e._l(e.fieldOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("span",{staticStyle:{padding:"0 10px"}}),i("el-input",{staticClass:"fieldValueinput",model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1),i("div",{staticClass:"commonSearchBtn"},[i("div",{on:{click:function(t){return e.searchOnClick(2)}}},[e._v("检索")]),i("div",{on:{click:function(t){return e.resetOnClick(2)}}},[e._v("重置")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.radio,expression:"radio == 3"}]},[i("div",{staticClass:"spaceSearchBox"},[i("div",[i("span",[e._v("图层选择")]),i("el-select",{attrs:{placeholder:"请选择图层",clearable:""},on:{change:e.layerSelectOnChange2},model:{value:e.layerSelectValue2,callback:function(t){e.layerSelectValue2=t},expression:"layerSelectValue2"}},e._l(e.layerOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",[i("span",[e._v("空间位置")]),i("el-select",{attrs:{placeholder:"请选择方式"},on:{change:e.spaceSelectOnChange},model:{value:e.spaceSelectValue,callback:function(t){e.spaceSelectValue=t},expression:"spaceSelectValue"}},e._l(e.spaceOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"spaceSearchTool_box"},["1"===e.spaceSelectValue?i("div",{staticClass:"spaceSearchTool_box_1"},[i("div",[e._v(" 点"),i("span",{class:["iconfont","icon-yuanquan",{activeToolSpan:1===e.taggleIndex}],on:{click:function(t){return e.taggleMapToolClick(1)}}})]),i("div",[e._v(" 矩形"),i("span",{class:["iconfont","icon-juxing",{activeToolSpan:2===e.taggleIndex}],on:{click:function(t){return e.taggleMapToolClick(2)}}})]),i("div",[e._v(" 多边形"),i("span",{class:["iconfont","icon-duobianxing",{activeToolSpan:3===e.taggleIndex}],on:{click:function(t){return e.taggleMapToolClick(3)}}})])]):e._e(),"2"===e.spaceSelectValue?i("div",{staticClass:"spaceSearchTool_box_2"},[i("v-region",{on:{values:e.regionChange}})],1):e._e(),"3"===e.spaceSelectValue?i("div",{staticClass:"spaceSearchTool_box_3"},[i("div",[i("span",[e._v("经度")]),i("el-input",{attrs:{disabled:e.spaceDisabled1},on:{input:e.changeOnInpnt1},model:{value:e.coordinateParams.lon,callback:function(t){e.$set(e.coordinateParams,"lon",t)},expression:"coordinateParams.lon"}}),i("span",[e._v("纬度")]),i("el-input",{attrs:{disabled:e.spaceDisabled1},on:{input:e.changeOnInpnt1},model:{value:e.coordinateParams.lat,callback:function(t){e.$set(e.coordinateParams,"lat",t)},expression:"coordinateParams.lat"}})],1),i("div",[i("span",[e._v("经距")]),i("el-input",{attrs:{disabled:e.spaceDisabled2},on:{input:e.changeOnInpnt2},model:{value:e.coordinateParams.coordX,callback:function(t){e.$set(e.coordinateParams,"coordX",t)},expression:"coordinateParams.coordX"}}),i("span",[e._v("纬距")]),i("el-input",{attrs:{disabled:e.spaceDisabled2},on:{input:e.changeOnInpnt2},model:{value:e.coordinateParams.coordY,callback:function(t){e.$set(e.coordinateParams,"coordY",t)},expression:"coordinateParams.coordY"}})],1),i("div",[i("span",[e._v("里程")]),i("el-input",{attrs:{disabled:e.spaceDisabled3},on:{input:e.changeOnInpnt3},model:{value:e.coordinateParams.mileage,callback:function(t){e.$set(e.coordinateParams,"mileage",t)},expression:"coordinateParams.mileage"}}),i("span",[e._v("偏距")]),i("el-input",{attrs:{disabled:e.spaceDisabled3},on:{input:e.changeOnInpnt3},model:{value:e.coordinateParams.offset,callback:function(t){e.$set(e.coordinateParams,"offset",t)},expression:"coordinateParams.offset"}})],1),i("div",[i("span",[e._v("距离")]),i("el-input",{model:{value:e.bufferDistanceValue,callback:function(t){e.bufferDistanceValue=t},expression:"bufferDistanceValue"}}),e._m(0)],1)]):e._e()])]),i("div",{staticClass:"commonSearchBtn"},[i("div",{on:{click:function(t){return e.searchOnClick(2)}}},[e._v("检索")]),i("div",{on:{click:function(t){return e.resetOnClick(2)}}},[e._v("重置")])])])]),i("div"),i("div")])},tt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._v("缓冲区（单位： "),i("i",{staticStyle:{color:"red"}},[e._v("m")]),e._v("）")])}],it=(i("7db0"),i("99af"),{data:function(){return{radio:"1",vagueInput:"",layerOptions:[{label:"地层（岩体）分布",layer:"geostratumzone",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:geostratumzone&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:geostratumzone&maxFeatures=10000&outputFormat=application/json",value:"geostratumzone"},{label:"围岩蚀变地层",layer:"aterationp",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:aterationp&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:aterationp&maxFeatures=10000&outputFormat=application/json",value:"aterationp"},{label:"地层界线分布",layer:"geoboundzone",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:geoboundzone&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:geoboundzone&maxFeatures=10000&outputFormat=application/json",value:"geoboundzone"},{label:"断层构造分布",layer:"faultzone",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:faultzone&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:faultzone&maxFeatures=10000&outputFormat=application/json",value:"faultzone"},{label:"产状点",layer:"occurrence",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:occurrence&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:occurrence&maxFeatures=10000&outputFormat=application/json",value:"occurrence"},{label:"围岩蚀变点",layer:"alterationt",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:alterationt&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:alterationt&maxFeatures=10000&outputFormat=application/json",value:"alterationt"},{label:"地形地貌",layer:"landform",name:"landform",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:landform&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:landform&maxFeatures=10000&outputFormat=application/json",value:"landform"},{label:"矿产开发及采空区",layer:"minegoaf",name:"minegoaf",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:minegoaf&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:minegoaf&maxFeatures=10000&outputFormat=application/json",value:"minegoaf"},{label:"特殊岩体",layer:"specialrocksoil",name:"specialrocksoil",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:specialrocksoil&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:specialrocksoil&maxFeatures=10000&outputFormat=application/json",value:"specialrocksoil"},{label:"不良地质",layer:"unfavorablegeology",name:"unfavorablegeology",wmsUrl:"http://192.10.3.237/geoserver/crcc-dev/wms",attrUrl:"http://192.10.3.237/geoserver/wfs?request=describeFeatureType&typename=crcc-dev:faultzone&outputFormat=application/json",wfsUrl:"http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:unfavorablegeology&maxFeatures=10000&outputFormat=application/json",value:"unfavorablegeology"}],fieldOptions:[{label:"",value:""}],layerSelectValue:"",layerSelectValue2:"",fieldSelectValue:"",fieldValue:"",spaceSelectValue:"1",spaceOptions:[{label:"地图选择",value:"1"},{label:"行政区",value:"2"},{label:"坐标位置",value:"3"}],taggleIndex:0,coordinateParams:{lon:"",lat:"",coordX:"",coordY:"",mileage:"",offset:""},bufferDistanceValue:"",spaceDisabled1:!1,spaceDisabled2:!1,spaceDisabled3:!1}},methods:{searchOnClick:function(e){var t=this;1===e?""!==this.vagueInput&&this.$http.get("/commonSearchByParams",{params:{holename:this.vagueInput}}).then((function(e){t.$emit("sendSearachResultDataEvent",e.data.data)})).catch((function(e){t.$emit("sendSearachResultDataEvent",null)})):2===e&&this.searchByTC()},searchByTC:function(){var e=this;if(console.log("图层查询"),""!==this.layerSelectValue){var t=this.layerOptions.find((function(t){if(t.layer===e.layerSelectValue)return t})),i=JSON.parse(JSON.stringify(t)),a=i.wfsUrl,n="",o=this.fieldValue;""!==this.fieldSelectValue&&""!==this.fieldValue&&(n="".concat(this.fieldSelectValue)+" like '%",n+="".concat(o)+"%'",a=a+"&cql_filter="+n);var r=[];this.$http(a).then((function(t){console.log(t.data);for(var a=t.data.features,o=0;o<a.length;o++)for(var l in a[o].properties)if(l.indexOf("id")>=0){var s={url:i.wmsUrl,layer:i.layer,cqlStr:n,label:"".concat(l,"=").concat(a[o].properties[l])};r.push(s);break}e.$emit("sendSearchInfoInwmsLayer",r)}))}},resetOnClick:function(e){1===e?(this.vagueInput="",this.$emit("sendResetInfoEvent",0),this.$emit("sendResetInfoEvent",1)):2===e&&(this.fieldOptions=[],this.fieldValue="",this.layerSelectValue="",this.fieldSelectValue="",this.$emit("sendResetInfoEvent",1),this.$emit("sendResetInfoEvent",2))},layerSelectOnChange:function(e){var t=this;if(""===e)return this.fieldOptions=[],this.fieldSelectValue="",void(this.fieldValue="");this.fieldValue="",this.fieldSelectValue="",this.fieldOptions=[];for(var i="",a=0;a<this.layerOptions.length;a++)if(this.layerOptions[a].layer===e){i=this.layerOptions[a].attrUrl;break}this.$http.get(i).then((function(e){for(var i=e.data.featureTypes[0].properties,a=[],n=0;n<i.length;n++){var o={label:i[n].name,value:i[n].name};a.push(o)}t.fieldOptions=a}))},layerSelectOnChange2:function(e){},fieldSelectOnChange:function(e){},spaceSelectOnChange:function(e){var t=parseInt(e);switch(t){case 1:break;case 2:break;case 3:break;default:break}},taggleMapToolClick:function(e){if(this.taggleIndex!==e)switch(this.taggleIndex=e,e){case 1:break;case 2:break;case 3:break;default:break}else this.taggleIndex=0},regionChange:function(e){console.log(e)},changeOnInpnt1:function(e){""===e?(this.spaceDisabled1=!1,this.spaceDisabled2=!1,this.spaceDisabled3=!1):(this.coordinateParams.coordX="",this.coordinateParams.coordY="",this.coordinateParams.mileage="",this.coordinateParams.offset="",this.spaceDisabled2=!0,this.spaceDisabled3=!0)},changeOnInpnt2:function(e){""===e?(this.spaceDisabled1=!1,this.spaceDisabled2=!1,this.spaceDisabled3=!1):(this.coordinateParams.lon="",this.coordinateParams.lat="",this.coordinateParams.mileage="",this.coordinateParams.offset="",this.spaceDisabled1=!0,this.spaceDisabled3=!0)},changeOnInpnt3:function(e){""===e?(this.spaceDisabled1=!1,this.spaceDisabled2=!1,this.spaceDisabled3=!1):(this.spaceDisabled1=!0,this.spaceDisabled2=!0,this.coordinateParams.lon="",this.coordinateParams.lat="",this.coordinateParams.coordX="",this.coordinateParams.coordY="")}},watch:{radio:function(e){switch(parseInt(e)){case 1:this.resetOnClick(2);break;case 2:this.resetOnClick(1);break;default:break}this.$emit("sendResetInfoEvent",1)}}}),at=it,nt=(i("4356"),i("a55e"),Object(r["a"])(at,et,tt,!1,null,"0e597ffb",null)),ot=nt.exports,rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},lt=[],st={},ct=st,ut=Object(r["a"])(ct,rt,lt,!1,null,null,null),dt=ut.exports,mt={data:function(){return{searchState:"",timeout:null,selectIndex:1,isSearchResultDialog:!1,isShowSearchBox:!1,resultList:[],closeFlag:0}},components:{commonSearch:ot,specialSearch:dt},methods:{querySearchAsync:function(e,t){""===e?t([]):"钻孔"===e?this.$http.get("/getAllHoleInfo").then((function(e){t(e.data.data)})).then((function(e){t([])})):setTimeout((function(){t([])}),1e3)},handleSelect:function(e){this.searchState=e.worksiteid,this.$emit("sendSearchParmsFromSerachBar",e)},receptResetInfoEvent:function(e){1===e&&(this.resultList=[],this.isSearchResultDialog=!1)},receptSearachResultDataEvent:function(e){if(e){this.resultList=[];for(var t=[],i=0;i<e.length;i++){var a={imageUrl:"../../../assets/images/imageIcon.png",label:e[i].borename,value:"",longitude:e[i].borelon,latitude:e[i].borelat,active:!1,type:1};t.push(a)}this.resultList=t,console.log(this.resultList),this.isSearchResultDialog=!0}else this.$message({type:"warning",message:"查询失败"})},receptSearchInfoInwmsLayer:function(e){if(e){this.resultList=[];for(var t=[],i=0;i<e.length;i++){var a={url:e[i].url,layer:e[i].layer,label:e[i].label,value:"",cqlStr:e[i].cqlStr,active:!1,type:2};t.push(a)}this.resultList=t,console.log(this.resultList),this.isSearchResultDialog=!0}else this.$message({type:"warning",message:"查询失败"})},flyToView:function(e){},itemOnclick:function(e){e.active=!e.active,1===e.type?this.$emit("sendResultItemFromSearchCompent",e):2===e.type&&(console.log(e),this.$emit("sendLayerItemFromSearchCompent",e))}}},pt=mt,ht=(i("85c6"),Object(r["a"])(pt,Ze,Qe,!1,null,"5c99e360",null)),vt=ht.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[e.isCommonVisible?i("div",{staticClass:"commonTableBox"},[i("div",{staticClass:"head_box"},[e._v(" "+e._s(e.tableTheme)+" "),i("span",{staticClass:"close_span",on:{click:e.closeOnClick}},[e._v("×")])]),i("div",{staticClass:"content_box"},[i("table",e._l(e.tableData,(function(t,a){return i("tr",{key:a},[i("td",[e._v(e._s(t.label))]),i("td",[e._v(e._s(t.value))])])})),0)])]):e._e()])},gt=[],yt={props:{tableData:{type:Array,default:function(){return[]}},isCommonVisible:{type:Boolean,default:!1},tableTheme:{type:String,default:""}},data:function(){return{}},methods:{closeOnClick:function(){this.$emit("sendCommonCloseInfo",!1)}}},bt=yt,wt=(i("ec68"),Object(r["a"])(bt,ft,gt,!1,null,"382ff11e",null)),Ct=wt.exports,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bottomTool"},[i("div",{staticClass:"map-coordinates"},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.isActiveSpan,expression:"isActiveSpan"}],staticStyle:{"font-size":"13px","text-align":"center","font-family":"微软雅黑",color:"#edffff"},attrs:{id:"cd_label"}},[e._v("暂无坐标信息")]),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isActiveSpan,expression:"!isActiveSpan"}],staticStyle:{"font-size":"13px","text-align":"center","font-family":"微软雅黑",color:"#edffff"},attrs:{id:"cd_label"}},[e._v(" 经度："+e._s(e.commonCesiumInfos.lng)+" 纬度："+e._s(e.commonCesiumInfos.lat)+" 海拔高度："+e._s(e.commonCesiumInfos.height)+"米 视点高度："+e._s(e.commonCesiumInfos.ViewpointsHeight)+"米 方向："+e._s(e.commonCesiumInfos.heading)+"度 俯仰角："+e._s(e.commonCesiumInfos.pitch)+"度 ")])]),i("div",{staticClass:"slidebox"},[i("span",{staticClass:"demonstration"},[e._v("地图服务透明度")]),i("el-slider",{attrs:{"show-tooltip":!1,max:1,min:0,step:.05},on:{input:e.changeImageryAlphaOnInput},model:{value:e.imageryAlpha,callback:function(t){e.imageryAlpha=t},expression:"imageryAlpha"}})],1),i("div",{staticClass:"slidebox1"},[i("span",{staticClass:"demonstration1"},[e._v("地表透明")]),i("el-slider",{attrs:{"show-tooltip":!1,max:1,min:0,step:.05},on:{input:e.changeAlphaOnInput},model:{value:e.slideValue,callback:function(t){e.slideValue=t},expression:"slideValue"}})],1)])},_t=[],St={props:["viewer"],data:function(){return{commonCesiumInfos:{lng:0,lat:0,height:0,ViewpointsHeight:0,heading:0,pitch:0},isActiveSpan:!0,slideValue:1,imageryAlpha:1}},methods:{moveShowInfo:function(e){var t=this,i=new D["L"](e.scene.canvas);i.setInputAction((function(i){var a=new D["f"](i.endPosition.x,i.endPosition.y);if(a){var n=e.scene.globe.pick(e.camera.getPickRay(a),e.scene);if(n){var o=e.scene.globe.ellipsoid.cartesianToCartographic(n),r=D["B"].toDegrees(o.latitude),l=D["B"].toDegrees(o.longitude),s=e.scene.globe.getHeight(o),c=e.scene.camera.positionCartographic.height;t.commonCesiumInfos.lng=l?l.toFixed(2)+"":"",t.commonCesiumInfos.lat=r?r.toFixed(2)+"":"",t.commonCesiumInfos.height=s?s.toFixed(2)+"":"",t.commonCesiumInfos.ViewpointsHeight=c?c.toFixed(2)+"":"",t.commonCesiumInfos.heading=D["B"].toDegrees(Number(e.scene.camera.heading)).toFixed(2),t.commonCesiumInfos.pitch=D["B"].toDegrees(Number(e.scene.camera.pitch)).toFixed(2),e.scene.debugShowFramesPerSecond=!0,t.isActiveSpan=!1}}}),D["M"].MOUSE_MOVE)},changeAlphaOnInput:function(e){this.$emit("sendAlphaInfo",e)},changeImageryAlphaOnInput:function(e){this.$emit("sendImageryAlpha",e)}},created:function(){var e=this;pe.$on("sendCesiumViewer",(function(t){e.moveShowInfo(t)}))},mounted:function(){},beforeDestroy:function(){pe.$off("sendCesiumViewer")}},kt=St,xt=(i("7f32"),i("3c2a"),Object(r["a"])(kt,Dt,_t,!1,null,"32060b4d",null)),Tt=xt.exports,It=function(){function e(t){Object(b["a"])(this,e),Object(C["a"])(this,"_positions",null),e._viewer=t,e._handler=new D["L"](e._viewer.scene.canvas),e._polyline=void 0,this._positions=[]}return Object(w["a"])(e,[{key:"startCreate",value:function(t){var i=this;e._handler.setInputAction((function(e){var t=i.getCatesian3FromPX(e.position);0===i._positions.length&&i._positions.push(t.clone()),i._positions.push(t)}),D["M"].LEFT_CLICK),e._handler.setInputAction((function(t){if(i._positions.length){var a=i.getCatesian3FromPX(t.endPosition);2!==i._positions.length||Object(D["Y"])(e._polyline)||(e._polyline=i.createPolyline()),e._polyline&&(i._positions.pop(),i._positions.push(a))}}),D["M"].MOUSE_MOVE),e._handler.setInputAction((function(a){var n=i.getCatesian3FromPX(a.position);e._handler.destroy(),i._positions.pop(),i._positions.push(n),t&&t(i._positions)}),D["M"].RIGHT_CLICK)}},{key:"getCatesian3FromPX",value:function(t){var i=e._viewer.camera.getPickRay(t),a=e._viewer.scene.globe.pick(i,e._viewer.scene);if(!a)throw new Error("未获取到正确坐标");return a}},{key:"createPolyline",value:function(){var t=this;return e._viewer.entities.add({polyline:{positions:new D["e"]((function(){return t._positions}),!1),material:D["n"].YELLOW,width:3,show:!0,clampToGround:!0}})}},{key:"destroy",value:function(){e._polyline=void 0,e._handler.isDestroyed()||e._handler.destroy(),e._viewer.entities.removeAll()}}]),e}();Object(C["a"])(It,"_viewer",null),Object(C["a"])(It,"_handler",null),Object(C["a"])(It,"_polyline",null);var Mt=function(){function e(t){Object(b["a"])(this,e),e._viewer=t,this.handler=new D["L"](e._viewer.scene.canvas),this.positions=[],this.polyline=void 0,this.polygon=void 0}return Object(w["a"])(e,[{key:"startCreate",value:function(e){var t=this;this.handler.setInputAction((function(e){var i=t.getCatesian3FromPX(e.position);t.positions.push(i)}),D["M"].LEFT_CLICK),this.handler.setInputAction((function(e){if(t.positions.length){var i=t.getCatesian3FromPX(e.endPosition);t.positions.length>2?t.polygon?(t.positions.pop(),t.positions.push(i)):(t.positions.pop(),t.positions.push(i),t.createPolygon()):t.polyline?(t.positions.pop(),t.positions.push(i)):(t.positions.push(i),t.createPolyLine())}}),D["M"].MOUSE_MOVE),this.handler.setInputAction((function(i){var a=t.getCatesian3FromPX(i.position);t.positions.pop(),t.positions.push(a),t.handler.destroy(),e&&e(t.positions),t.polygon=void 0,t.polyline=void 0}),D["M"].RIGHT_CLICK)}},{key:"getCatesian3FromPX",value:function(t){var i=e._viewer.camera.getPickRay(t),a=e._viewer.scene.globe.pick(i,e._viewer.scene);if(!a)throw new Error("未获取到正确坐标");return a}},{key:"createPolyLine",value:function(){var t=this;this.polyline=e._viewer.entities.add({polyline:{positions:new D["e"]((function(){return t.positions}),!1),material:D["n"].YELLOW,width:3,show:!1,clampToGround:!0}})}},{key:"createPolygon",value:function(){var t=this;this.polygon=e._viewer.entities.add({polygon:{hierarchy:new D["e"]((function(){return new D["H"](t.positions)}),!1),material:new D["n"](.1,.5,.9,.4),outline:!0,outlineColor:D["n"].RED,outlineWidth:1}})}},{key:"destroy",value:function(){this.polygon=void 0,this.polyline=void 0,this.handler.isDestroyed()||this.handler.destroy(),e._viewer.entities.removeAll()}}]),e}();Object(C["a"])(Mt,"_viewer",null);var Rt=function(){function e(t){Object(b["a"])(this,e),e._viewer=t}return Object(w["a"])(e,[{key:"startCreate",value:function(){console.log("111 :>> ",111)}}]),e}();Object(C["a"])(Rt,"_viewer",null);var At=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(b["a"])(this,e),this._viewer=t,this._points=i.points,this._bottomMaterial=i.bottomMaterial,this._wallMaterial=i.wallMaterial,this._height=D["X"](i.height,0),this._lerpInterval=D["X"](i.lerpInterval,50),this._excavateMinHeight=9999,this.minHeight=99999,this._viewer.scene.highDynamicRangeSupported&&(this._viewer.scene.highDynamicRange=!0,this._hasChangeHighDynamicRange=!0),this._clip(this._points)}return Object(w["a"])(e,[{key:"_clip",value:function(e){e.length<3||this._lerpInterval<0||(this.destroy(),this._clippingTerrain(e),this._getMinPointHeight(e),this._createBottomSurface(e),this._createShaftWall(e))}},{key:"_clippingTerrain",value:function(e){for(var t=this._judgeDirection(e),i=[],a=e.length,n=0;n<a;++n){var o=(n+1)%a,r=D["g"].normalize(e[n],new D["g"]),l=t?D["g"].subtract(e[o],e[n],new D["g"]):D["g"].subtract(e[n],e[o],new D["g"]);l=D["g"].normalize(l,l);var s=D["g"].cross(l,r,new D["g"]);s=D["g"].normalize(s,s),i.push(new D["l"](s,0))}this._viewer.scene.globe.clippingPlanes=new D["m"]({planes:i,edgeWidth:1,edgeColor:D["n"].WHITE})}},{key:"_getMinPointHeight",value:function(e){var t=this;e.forEach((function(e){var i=D["h"].fromCartesian(e);i.height<t._excavateMinHeight&&(t._excavateMinHeight=i.height)})),this._targetHeight=this._excavateMinHeight-this._height,this.minHeight=this._targetHeight}},{key:"_judgeDirection",value:function(e){var t=D["h"].fromCartesian(e[0]),i=D["h"].fromCartesian(e[1]),a=D["h"].fromCartesian(e[2]),n=t.longitude,o=t.latitude,r=i.longitude,l=i.latitude,s=a.longitude,c=a.latitude,u=(r-n)*(c-l)-(l-o)*(s-r),d=u>0;return d}},{key:"_createShaftWall",value:function(e){for(var t=this._lerpInterval,i=e.length,a=[],n=0;n<i;n++)for(var o=(n+1)%i,r=D["h"].fromCartesian(e[n]),l=D["h"].fromCartesian(e[o]),s=[r.longitude,r.latitude],c=[l.longitude,l.latitude],u=0;u<t;u++){var d=D["B"].lerp(s[0],c[0],u/t),m=D["B"].lerp(s[1],c[1],u/t);a.push(new D["h"](d,m))}a.push(a[0].clone()),this._createWellWall(a)}},{key:"_createWellWall",value:function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(t){var i,a,n,o,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[],a=[],n=[],e.next=3,D["Z"](this._viewer.terrainProvider,t);case 3:t.forEach((function(e){var t=e.longitude,o=e.latitude,l=e.height;i.push(D["g"].fromRadians(t,o,l)),a.push(l),n.push(r._targetHeight)})),o=new D["x"]({image:this._wallMaterial,repeat:new D["f"](5,5)}),this._wallGraphic=new D["q"]({wall:new D["S"]({positions:i,maximumHeights:a,minimumHeights:n,material:o})}),this._viewer.entities.add(this._wallGraphic);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_createBottomSurface",value:function(e){var t=new D["x"]({image:this._bottomMaterial,repeat:new D["f"](5,5)});this._bottomSurface=new D["q"]({polygon:{hierarchy:new D["H"](e),height:this._targetHeight,material:t}}),this._viewer.entities.add(this._bottomSurface)}},{key:"_updateExcavateDepth",value:function(e){this._bottomSurface&&this._viewer.scene.primitives.remove(this._bottomSurface),this._wallGraphic&&this._viewer.scene.primitives.remove(this._wallGraphic),this._height=e,this._getMinPointHeight(this._points),this._createBottomSurface(this._points),this._createShaftWall(this._points)}},{key:"destroy",value:function(){this._hasChangeHighDynamicRange&&(this._viewer.scene.highDynamicRange=!1,this._hasChangeHighDynamicRange=!1),this._viewer.scene.globe.clippingPlanes&&(this._viewer.scene.globe.clippingPlanes.enabled=!1,this._viewer.scene.globe.clippingPlanes.removeAll()),this._bottomSurface&&(this._viewer.entities.remove(this._bottomSurface),delete this._bottomSurface),this._wallGraphic&&(this._viewer.entities.remove(this._wallGraphic),delete this._wallGraphic)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._updateExcavateDepth(e)}}]),e}(),Ot=i("b7a4"),Lt=i("5c96"),Pt=(i("bd04"),i("16f2"),[]),Ft=null,Et=null,Bt={feature:void 0,originalColor:new D["n"],type:void 0},Ht={feature:void 0,originalColor:new D["n"]},jt={data:function(){return{isShowTool:!1,flag:0,mdlNameValue:"",mdlOptions:[],cesiumMenuList:[{id:1,checked:!1,icon:"icon-map",label:"二维服务"},{id:2,checked:!1,icon:"icon-diqiu",label:"三维服务"},{id:3,checked:!1,icon:"icon-fenxi",label:"专业分析"},{id:4,checked:!1,icon:"icon-gongju",label:"模型工具"},{id:5,checked:!1,icon:"icon-gongju",label:"模型分析"}],activeIndex:0,isWireframevCheck:!1,mdlName:"",layerInfo:[],drillName:"钻孔分层信息",isLayerDialogVisible:!1,isMdlSelectVisible:!1,isCesiumCommonToolVisible:!0,activeImageUrl:["https://tsy-gis1.portal.com/server/rest/services/geoinfo_geomap/MapServer/","https://tsy-gis1.portal.com/server/services/geoinfo_geomap/MapServer/WMSServer","http://192.10.3.237/geoserver/crcc-dev/wms","http://192.10.3.237/geoserver/wms","http://10.101.140.3/geoserver/db-24/wms","http://192.10.3.237/geoserver/crcc-dev/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=crcc-dev:geoboundzone&maxFeatures=50&outputFormat=application/json"],flashX:.5,flashFlag:!0,activeDoubleEvent:!1,flagTimer:null,isvirtualLayerDialogVisible:!1,virtualLayerInfo:[],fieldsList:[],virtualTableTheme:null,isCommonVisible:!1,tableCommonData:[],tableTitleTheme:null,layerThickness:[4.3,7.2,3.4,5.8,10,3.9,3.7,4.5],removeListener:void 0}},components:{adjustMdlComponent:se,mapView:Ce,mdlView:Te,mdlFenxi:Le,cesiumCommonTool:je,holeLayerInfo:Ge,searchBar:vt,virtualBox:Je,commonTableBox:Ct,bottomTool:Tt},computed:{mdlParmsChange:function(){return this.$store.getters.getTileMdlTool}},watch:{mdlParmsChange:{deep:!0,handler:function(e){this.updateMatrixMdl(e)}},cesiumMenuList:{deep:!0,handler:function(e){e[3].checked||(this.isShowTool=!1,this.mdlNameValue="")}},isShowTool:function(e){if(e)for(var t=JSON.parse(JSON.stringify(this.$store.getters.getTileMdlTool)),i=0;i<Pt.length;i++)Pt[i].name===this.mdlName&&(t.longitude=Pt[i].longitude,t.latitude=Pt[i].latitude,t.height=Pt[i].height,this.$store.commit("setTileMdlToolInfo",t))},activeIndex:function(e){if(5===e){var t=this.$router.resolve({path:"/mdlScene",query:{id:1}});window.open(t.href,"_blank")}}},methods:{activeMenuItemOnClick:function(e){e.checked=!e.checked,this.activeIndex=!0===e.checked?e.id:0,this.cesiumMenuList.forEach((function(t){t.id!==e.id&&(t.checked=!1)}))},initCesium:function(){var e=!1,t=(this.tiandituTk,new D["a"]({url:"http://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer",layers:"imgTypeESRIMap"}));t.name="imgTypeESRIMap",Ft=new D["R"]("cesiumContainer",{geocoder:e,homeButton:e,timeline:e,navigationHelpButton:e,sceneModePicker:e,fullscreenButton:e,creditsDisplay:e,baseLayerPicker:e,animation:e,shadows:!1,infoBox:!1,imageryProvider:t,orderIndependentTranslucency:!1,contextOptions:{webgl:{alpha:!0}}}),Ft.scene.skyBox.show=!1,Ft.scene.sun.show=!1,Ft.scene.moon.show=!1,Ft.scene.backgroundColor=D["n"].BLACK,Ft.scene.globe.enableLighting=!1,Ft._cesiumWidget._creditContainer.style.display="none",Et=Ft.imageryLayers;var i=Ft.scene;this.holeBillbordsLayer=Ft.scene.primitives.add(new D["d"]({scene:Ft.scene})),i.globe.depthTestAgainstTerrain=!0,i.globe.translucency.enabled=!0,i.globe.translucency.frontFaceAlphaByDistance=new D["F"](1e3,1,1e6,1),this.flytochina()},loadWmsLayer:function(e,t,i){var a=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var o,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=a.layerIsExist_2(t),!o.flag){n.next=5;break}Et._layers[o.index].show=i,n.next=12;break;case 5:return r=new D["T"]({url:e,layers:t,parameters:{transparent:!0,format:"image/png",VERSION:"1.1.1",srs:"EPSG:4326",service:"WMS",exceptions:"application/vnd.ogc.se_inimage"}}),r.name=t,n.next=9,r.readyPromise;case 9:n.sent,console.log("定位"),Et&&(l=Et.addImageryProvider(r),l.getViewableRectangle().then((function(e){return console.log(e),camera.flyTo({destination:e})})));case 12:case"end":return n.stop()}}),n)})))()},loadESRILayer:function(e,t,i){var a=this.layerIsExist_2(t);if(a.flag)Et._layers[a.index].show=i;else{var n=new D["a"]({url:e,layers:t});n.name=t,Et&&Et.addImageryProvider(n)}},loadOSMLayer:function(e,t,i){var a=this.layerIsExist_2(t);if(a.flag)Et._layers[a.index].show=i;else{var n=new D["G"]({url:e,layers:t});n.name=t,Et&&Et.addImageryProvider(n)}},loadUTLayer:function(e,t,i){var a=this.layerIsExist_2(t);if(a.flag)Et._layers[a.index].show=i;else{var n=new D["P"]({url:e,layers:t,tilingScheme:new D["V"],minimumLevel:1,maximumLevel:20});n.name=t,Et&&Et.addImageryProvider(n)}},loadSelectWmsLayer:function(e,t,i,a,n){var o=this.layerIsExist_2("temp"+t+i);if(o.flag)Et.remove(Et._layers[o.index]);else{var r={transparent:!0,format:"image/png",VERSION:"1.1.1",srs:"EPSG:4326",service:"WMS",styles:"hlight-style",exceptions:"application/vnd.ogc.se_inimage"};r.CQL_FILTER=""===a||i===a?i:i+" and "+a,console.log(r);var l=new D["T"]({url:e,layers:t,parameters:r});l.name="temp"+t+i,Et.addImageryProvider(l)}},layerIsExist_2:function(e){for(var t=!1,i=0,a=0;a<Et._layers.length;a++)if(Et._layers[a].imageryProvider.name===e){t=!0,i=a;break}return{flag:t,index:i}},loadWfsLayer:function(e,t,i){var a=this.kmlSourceIsExist(t);console.log(a),a.flag?Et.remove(Et._layers[a.index]):this.$http.get(e).then(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D["s"].load(i.data);case 2:a=e.sent,a.name=t,Ft.dataSources.add(a),Ft.flyTo(a.entities);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},loadSelectWfsLayer:function(e,t,i){var a=this.kmlSourceIsExist(t);a.flag&&Ft.dataSources.remove(a.dataSource),this.$http.get(e).then(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D["s"].load(i.data);case 2:a=e.sent,console.log(a),a.heightReference=D["v"].CLAMP_TO_GROUND,a.name=t,Ft.dataSources.add(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},loadMapServer:function(e,t){var i=this.layerIsExist(e);if(i.flag)Et.remove(Et._layers[i.index]);else{var a=new D["a"]({url:e});Ft.zoomTo(a),Et&&Et.addImageryProvider(a)}},loadTDMapLayer:function(e,t,i){var a=this.layerIsExist(e);if(a.flag)Et.remove(Et._layers[a.index]);else{var n=["0","1","2","3","4","5","6","7"],o=new D["U"]({url:e,subdomains:n,layer:t,style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible",show:!0});o.name=t,Et.addImageryProvider(o)}},loadKmlSource:function(e,t,i){var a=this.kmlSourceIsExist(t);if(a.flag)a.dataSource.show=i;else{var n={camera:Ft.scene.camera,canvas:Ft.scene.canvas,clampToGround:!0},o=D["A"].load(e,n);o.then((function(e){Ft.flyTo(o),e.name=t,Ft.dataSources.add(e)}))}},selectOnMdlchange:function(e){console.log("加载模型"),this.mdlName=e;for(var t=JSON.parse(JSON.stringify(this.$store.getters.getTileMdlTool)),i=0;i<Pt.length;i++)Pt[i].name===this.mdlName&&(t.longitude=Pt[i].longitude,t.latitude=Pt[i].latitude,t.height=Pt[i].height,this.$store.commit("setTileMdlToolInfo",t));this.isShowTool=!0},load3dTiles:function(e,t,i,a){var n=this;return Object(S["a"])(regeneratorRuntime.mark((function o(){var r,l,s,c,u,d,m,p,h,v;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(""!==e){o.next=2;break}return o.abrupt("return");case 2:if(r=n.judgeIs3DTiles(e),!r.flag){o.next=6;break}return r.tile.show=i,o.abrupt("return");case 6:return l=new D["j"]({url:e,maximumScreenSpaceError:2,maximumNumberOfLoadedTiles:50}),o.next=9,l.readyPromise;case 9:s=o.sent,s.name=t,Ft.scene.primitives.add(s),c=s.modelMatrix.clone(),u=s.boundingSphere.center.clone(),d=D["h"].fromCartesian(u),m=n.getMdlDegreeCenter(d),p=JSON.parse(JSON.stringify(n.$store.getters.getTileMdlTool)),p.longitude=m[1],p.latitude=m[2],p.height=m[0],Pt.push({tileSet:s,modelMatrix:c,boundingSphereCenter:u,name:t,longitude:p.longitude,latitude:p.latitude,height:p.height}),n.mdlOptions.push({value:t,label:a}),n.mdlName=t,"holemdl"===t?(console.log("钻孔模型定位",m),h=D["g"].fromDegrees(m[1]+1e-5,m[2],m[0]-400),v=new D["u"].fromDegrees(357.27879878293834,-21.34390550872461,.0716951918898415),Ft.scene.camera.setView({destination:h,orientation:v,endTransform:D["D"].IDENTITY})):Ft.zoomTo(l,new D["t"](0,-.5,l.boundingSphere.radius));case 25:case"end":return o.stop()}}),o)})))()},processTileFeatures:function(e,t){var i=e.content,a=i.innerContents;if(D["Y"](a))for(var n=a.length,o=0;o<n;++o)this.processContentFeatures(a[o],t);else this.processContentFeatures(i,t)},processContentFeatures:function(e,t){for(var i=e.featuresLength,a=0;a<i;++a){var n=e.getFeature(a);t(n)}},loadHoleLayer:function(e,t,i){var a=this;return Object(S["a"])(regeneratorRuntime.mark((function i(){var n,o,r,l,s,c,u,d,m,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=a.billbordsIsExist(t),!n.isChecked){i.next=4;break}return Ft.scene.primitives.remove(n.obj),i.abrupt("return");case 4:return o=Ft.scene.primitives.add(new D["d"]({scene:Ft.scene})),console.log("billboards函数"),o.name=t,i.next=9,a.$http.get(e);case 9:for(r=i.sent,l=0;l<r.data.data.length;l++)s=Number(r.data.data[l].borelon),c=Number(r.data.data[l].borelat),Number(r.data.data[l].boreheight),u=r.data.data[l].borename,d=D["g"].fromDegrees(s,c),1===l&&(m=D["g"].fromDegrees(Number(r.data.data[parseInt(r.data.data.length/2)].borelon),Number(r.data.data[parseInt(r.data.data.length/2)].borelat),Number(r.data.data[parseInt(r.data.data.length/2)].boreheight)+2e3),p=new D["u"].fromDegrees(-11.27879878293835,-20.34390550872461,.0716951918898415),Ft.scene.camera.setView({destination:m,orientation:p,endTransform:D["D"].IDENTITY})),a.addHolePrimitive(o,d,u);case 11:case"end":return i.stop()}}),i)})))()},addHolePrimitive:function(e,t,a){e.add({position:t,image:i("dae0"),show:!0,pixelOffset:new D["f"](0,0),eyeOffset:new D["g"](0,0,0),horizontalOrigin:D["w"].CENTER,verticalOrigin:D["Q"].BOTTOM,color:D["n"].LIME,alignedAxis:D["g"].ZERO,scaleByDistance:new D["F"](150,.8,8e6,0),heightReference:D["v"].CLAMP_TO_GROUND,id:a})},getDataSource:function(e,t,a){var n=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){var o,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$http.get(e);case 2:o=a.sent,n,{camera:Ft.scene.camera,canvas:Ft.scene.canvas,clampToGround:!0},r=Ft.dataSources.add(new D["o"](t)),l=[{src:i("6a60")},{src:i("1de70")},{src:i("1e3b")},{src:i("23845")},{src:i("1927")}],r.then((function(e){for(var t=0;t<o.data.data.length;t++){var a=Number(o.data.data[t].borelon),n=Number(o.data.data[t].borelat),s=(Number(o.data.data[t].boreheight),o.data.data[t].borename),c=e.entities.add({id:"hole"+t,position:D["g"].fromDegrees(a,n),billboard:{image:i("dae0"),width:32,height:38,heightReference:D["v"].CLAMP_TO_GROUND,horizontalOrigin:D["w"].CENTER,verticalOrigin:D["Q"].BOTTOM,id:s}});c.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY,Ft.flyTo(r)}var u,d=50,m=10,p=!0;function h(){D["Y"](u)?(u(),u=void 0):u=e.clustering.clusterEvent.addEventListener((function(e,t){var i=e.length;t.label.show=!0,t.label.text=i+"",t.label.horizontalOrigin=D["w"].CENTER,t.label.verticalOrigin=D["Q"].CENTER,t.label.disableDepthTestDistance=Number.POSITIVE_INFINITY,t.label.pixelOffset=new D["f"](0,-45),t.billboard.show=!0,t.billboard.id=t.label.id,t.billboard.verticalOrigin=D["Q"].BOTTOM,t.heightReference=D["v"].CLAMP_TO_GROUND,i>=100?(t.label.text="100+",t.label.font="normal 18px MicroSoft YaHei",t.billboard.image=l[4].src,t.label.pixelOffset=new D["f"](1,-25),t.billboard.width=50,t.billboard.height=50):i>=50?(t.label.font="normal 30px MicroSoft YaHei",t.billboard.image=l[4].src,t.label.pixelOffset=new D["f"](1,-25),t.billboard.width=50,t.billboard.height=50):i>=40?(t.label.font="normal 27px MicroSoft YaHei",t.billboard.image=l[3].src,t.label.pixelOffset=new D["f"](1,-22),t.billboard.width=45,t.billboard.height=45):i>=30?(t.label.font="normal 24px MicroSoft YaHei",t.billboard.image=l[2].src,t.label.pixelOffset=new D["f"](1,-20),t.billboard.width=40,t.billboard.height=40):i>=20?(t.label.font="normal 20px MicroSoft YaHei",t.billboard.image=l[1].src,t.label.pixelOffset=new D["f"](1,-17),t.billboard.width=35,t.billboard.height=35):(t.label.font="normal 16px MicroSoft YaHei",t.label.pixelOffset=new D["f"](1,-15),t.billboard.image=l[0].src,t.billboard.width=30,t.billboard.height=30)}));var t=e.clustering.pixelRange;e.clustering.pixelRange=0,e.clustering.pixelRange=t}e.clustering.enabled=p,e.clustering.pixelRange=d,e.clustering.minimumClusterSize=m,h()}));case 8:case"end":return a.stop()}}),a)})))()},judgeIs3DTiles:function(e){var t=Ft.scene.primitives._primitives;if(0===t.length)return{flag:!1,tile:null};for(var i=0;i<t.length;i++)if(t[i]instanceof D["j"]&&t[i]._url===e)return{flag:!0,tile:t[i]};return{flag:!1,tile:null}},layerIsExist:function(e){for(var t=!1,i=0,a=0;a<Et._layers.length;a++)if(Et._layers[a].imageryProvider.url===e){t=!0,i=a;break}return{flag:t,index:i}},kmlSourceIsExist:function(e){var t=!1,i=null,a=Ft.dataSources._dataSources;if(0===a.length)return{flag:t,dataSource:i};for(var n=0;n<a.length;n++)if(a[n].name===e){t=!0,i=a[n];break}return{flag:t,dataSource:i}},billbordsIsExist:function(e){for(var t=Ft.scene._primitives._primitives,i={isChecked:!1,obj:null},a=0;a<t.length;a++)t[a]instanceof D["d"]&&t[a].name===e&&(i.isChecked=!0,i.obj=t[a]);return i},getMdlDegreeCenter:function(e){var t,i,a;return t=e.height,i=Number(D["B"].toDegrees(e.longitude).toFixed(6)),a=Number(D["B"].toDegrees(e.latitude).toFixed(6)),[t,i,a]},updateMatrixMdl:function(e){if(0!==Pt.length)for(var t=0;t<Pt.length;t++)if(Pt[t].name===this.mdlName){var i=I.transformUtils(Pt[t].modelMatrix,Pt[t].boundingSphereCenter),a=i.translationMdl(e.longitude,e.latitude,e.height),n=i.rotationMdl(e.rotateX,e.rotateY,e.rotateZ),o=i.scaleMdl(e.scale,e.scale,e.scale),r=new D["D"];D["D"].multiply(a,n,r),D["D"].multiply(r,o,r),Pt[t].tileSet.modelMatrix=r,Ft.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=D["B"].clamp(e.alpha,0,1)}},drawCanvas:function(e,t,i){var a=document.createElement("canvas"),n=a.getContext("2d");return n.font=i+"px Arial",a.width=n.measureText(t).width+2*i,a.height=2*i,n.drawImage(e,i/2,i/2,i,i),n.fillStyle="#000",n.font=i+"px Calibri,sans-serif",n.shadowOffsetX=1,n.shadowOffsetY=0,n.shadowColor="#fff",n.shadowBlur=1,n.fillText(t,7*i/6,4*i/3),a},onClickReset:function(){0===Pt.length?this.flytochina():Ft.flyTo(Pt[0].tileSet,{duration:1,offset:new D["t"](0,-.5,4*Pt[0].tileSet.boundingSphere.radius)})},onClickUnder:function(){},dig3DTerrian:function(){Ft.entities&&(Ft.scene.globe.clippingPlanes&&Ft.scene.globe.clippingPlanes.removeAll(),Ft.entities.removeAll());var e=new Mt(Ft);e.startCreate((function(e){var t=e.length;e[t-1]===e[t-2]&&e.splice(t-1),new At(Ft,{points:e,bottomMaterial:"material/excavate_bottom_min.jpg",wallMaterial:"material/excavate_bottom_min.jpg",height:8e3,lerpInterval:50})}))},clearDraw:function(){Ft.entities&&(Ft.scene.globe.clippingPlanes&&Ft.scene.globe.clippingPlanes.removeAll(),Ft.entities.removeAll()),this.activeDoubleEvent=!1},registerOnclickEvent:function(){var e=this;if(Ft){var t=new D["L"](Ft.scene.canvas);t.setInputAction((function(t){clearTimeout(e.flagTimer),e.flagTimer=window.setTimeout((function(){if(e.setFeatureColor(Bt,void 0),!(e.get3DTilesFeature(t)>-1)){var i=Ft.scene.pick(t.position);console.log("钻孔查询"),D["Y"](i)&&D["Y"](i.id)&&e.$http.get("/getHoleLayerInfoByHoleCode",{params:{holecode:i.id}}).then((function(t){e.drillName=i.id,e.layerInfo=t.data.data,e.isLayerDialogVisible=!0})),D["Y"](Ht.feature)&&(Ht.feature.color=Ht.originalColor,Ht.feature=void 0);var a=Ft.camera.getPickRay(t.position),n=Ft.scene.globe.pick(a,Ft.scene);if(n){var o=D["h"].fromCartesian(n);if(o){var r=new D["f"],l=Ft.camera.positionCartographic.height,s=e.getMapLevel(l),c=e.getQueryImageryProvider();if(!c)return;if(c.ready){r=c.tilingScheme.positionToTileXY(o,s,r);var u=c.pickFeatures(r.x,r.y,s,o.longitude,o.latitude);D["bb"](u,(function(t){e.tableCommonData=[];var i=t[0].properties;console.log(i);var a=null;for(var n in i)a={label:n,value:i[n]},e.tableCommonData.push(a);e.isCommonVisible=!0}))}}}}}),200),console.log("左键查询")}),D["M"].LEFT_CLICK),t.setInputAction((function(t){var i=Ft.scene.pick(t.endPosition);e.setFeatureColor(Bt,i),D["Y"](i)?Ft._container.style.cursor="pointer":Ft._container.style.cursor="default"}),D["M"].MOUSE_MOVE),t.setInputAction((function(t){if(clearTimeout(e.flagTimer),e.activeDoubleEvent){var i=Ft.scene.pick(t.position);if(D["Y"](i)){var a=Ft.scene.pickPosition(t.position),n=D["h"].fromCartesian(a);e.getMdlDegreeCenter(n);e.virtualLayerInfo=[];var o=new Ot["DummyHoleServicePromiseClient"]("http://10.101.140.3:8011"),r=new Ot["DummyHoleServiceRequest"];r.setMdlDbId(81),r.setMdlId(1);var l=new Ot["A3dDot"];l.setX(449527.06),l.setY(2714965.48),l.setZ(0);var s=[];return s.push(l),r.setRgnDotsList(s),void o.createDummyHoles(r,{}).then((function(t){var i=t.toObject(),a=i.holeListList[0];Object.keys(a.layerInfoListList[0]);e.fieldsList=[],e.virtualLayerInfo=a.layerInfoListList,e.virtualTableTheme="虚拟钻孔点位信息",e.isvirtualLayerDialogVisible=!0}))}}console.log("双击左键")}),D["M"].LEFT_DOUBLE_CLICK)}},get3DTilesFeature:function(e){var t=this;D["Y"](Ht.feature)&&(Ht.feature.color=Ht.originalColor,Ht.feature=void 0);var i=Ft.scene.pick(e.position);if(!D["Y"](i))return-1;if(Ht.feature=i,D["n"].clone(i.color,Ht.originalColor),console.log("pickedFeature:",i),console.log("rightClickHighted:",Ht),i.color=D["n"].BLUE,D["Y"](i)&&i instanceof D["i"]){if("3DTiles/drill_3dtiles/tileset.json"===i.tileset._url){var a=Ft.scene.pickPosition(e.position),n=D["h"].fromCartesian(a),o=i.getProperty("钻孔编码");console.log(i.getProperty("孔口标高"),this.getMdlDegreeCenter(n)[0]);var r=i.getProperty("孔口标高")-this.getMdlDegreeCenter(n)[0];console.log(r),this.$http.get("/getHoleLayerInfoByHoleCode",{params:{holecode:o}}).then((function(e){t.drillName=o,t.layerInfo=e.data.data,t.isLayerDialogVisible=!0}))}else if("3DTiles/model_3dtiles/tileset.json"===i.tileset._url){this.tableCommonData=[];var l="地层编码";this.tableTitleTheme="钻孔分层信息";var s=i.getProperty("地层编码"),c={label:l,value:s};this.tableCommonData.push(c),this.isCommonVisible=!0}else{this.tableCommonData=[];for(var u=i.getPropertyNames(),d=0;d<u.length;d++){var m={label:u[d],value:i.getProperty(u[d])};this.tableTitleTheme="地层信息",this.tableCommonData.push(m),this.isCommonVisible=!0}}return 1}return-1},drawLine:function(e,t,i){Ft.entities.add({polyline:{positions:[e,t],arcType:D["b"].NONE,width:5,material:i,depthFailMaterial:i}})},getQueryImageryProvider:function(){for(var e=Et._layers,t=0;t<e.length;t++){var i=e[t].imageryProvider.url;if(this.activeImageUrl.indexOf(i)>=0&&e[t].show)return e[t].imageryProvider}return null},getMapLevel:function(e){return e>48e6?0:e>24e6?1:e>12e6?2:e>6e6?3:e>3e6?4:e>15e5?5:e>75e4?6:e>375e3?7:e>187500?8:e>93750?9:e>46875?10:e>23437.5?11:e>11718.75?12:e>5859.38?13:e>2929.69?14:e>1464.84?15:e>732.42?16:e>366.21?17:18},recept2dViewInfo:function(e){"wms"===e.nodeData.serviceType?this.loadWmsLayer(e.nodeData.url,e.nodeData.layers,e.isChecked):"Google"===e.nodeData.serviceType?this.loadUTLayer(e.nodeData.url,e.nodeData.layers,e.isChecked):"ESRI"===e.nodeData.serviceType?this.loadESRILayer(e.nodeData.url,e.nodeData.layers,e.isChecked):"OSM"===e.nodeData.serviceType?this.loadOSMLayer(e.nodeData.url,e.nodeData.layers,e.isChecked):"wfs"===e.nodeData.serviceType?this.loadWfsLayer(e.nodeData.url,e.nodeData.name,e.isChecked):"mapserver"===e.nodeData.serviceType?this.loadMapServer(e.nodeData.url,e.isChecked):"kml"===e.nodeData.serviceType?this.loadKmlSource(e.nodeData.url,e.nodeData.name,e.isChecked):"天地图"===e.nodeData.serviceType?this.loadTDMapLayer(e.nodeData.url,e.nodeData.layers,e.isChecked):"billboards"===e.nodeData.serviceType?(console.log("加载billboards"),this.loadHoleLayer(e.nodeData.url,e.nodeData.name,e.isChecked)):"地形服务"===e.nodeData.serviceType&&this.loadTerrain_2(e.nodeData.url,e.isChecked)},recept3dViewInfo:function(e){"3DTiles"===e.nodeData.serviceType&&this.load3dTiles(e.nodeData.url,e.nodeData.name,e.isChecked,e.nodeData.label)},commonToolHandleOnClick:function(e){if(Ft)switch(e.index){case 1:I.viewCesiumUtils().taggleEarthShow(Ft);break;case 2:I.viewCesiumUtils().taggleUnderSpace(Ft);break;case 3:I.viewCesiumUtils().resetView(Ft,113.805972,27.664014,8e6);break;case 4:I.viewCesiumUtils().zoomOut(Ft);break;case 5:I.viewCesiumUtils().zoomIn(Ft);break;case 6:I.viewCesiumUtils().taggleFullScreen(e.active);break;case 7:I.viewCesiumUtils().zoomOut(Ft);break;default:break}},flytochina:function(){Ft.camera.flyTo({destination:D["g"].fromDegrees(110.435314,40.960521,8e6),orientation:{heading:D["B"].toRadians(20),pitch:D["B"].toRadians(-95),roll:D["B"].toRadians(-20)},complete:function(){}})},receptWifeinfo:function(e){for(var t=0;t<Pt.length;t++)Pt[t].name===this.mdlName&&(Pt[t].tileSet.debugWireframe=e)},receptFenxiInfo:function(e){"地形挖掘"===e.label?this.dig3DTerrian():"清除绘制"===e.label?this.clearDraw():"虚拟钻孔"===e.label&&(this.activeDoubleEvent=!0)},receptAlphaInfo:function(e){console.log(e),Ft.scene.globe.translucency.frontFaceAlphaByDistance.nearValue=D["B"].clamp(e,0,1)},receptImageryAlpha:function(e){console.log("图层透明度");for(var t=0;t<Et._layers.length;t++)"tdtCiaLayer"!==Et._layers[t].imageryProvider.name&&"vecTypeESRICOC"!==Et._layers[t].imageryProvider.name&&"vecTypeOSM"!==Et._layers[t].imageryProvider.name&&"imgTypeESRIMap"!==Et._layers[t].imageryProvider.name&&(Et._layers[t].alpha=e)},receptSearchInfo:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function i(){var a,n,o,r,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.billbordsIsExist("holeLayer"),!a.isChecked||!a.obj.show){i.next=6;break}for(n=a.obj._billboards,o=0;o<n.length;o++)r=n[o].id,r===e.worksiteid&&(console.log(n[o]),n[o].color.clone(),l=new D["n"](255,255,255,1),n[o].color=l,Ft.camera.flyTo({destination:D["g"].fromDegrees(e.borelon,e.borelat,500),orientation:{heading:D["B"].toRadians(0),pitch:D["B"].toRadians(-90),roll:0}}));i.next=9;break;case 6:if(0!==billboardsList.length){i.next=9;break}return t.$message({type:"warning",message:"请先加载钻孔"}),i.abrupt("return");case 9:case"end":return i.stop()}}),i)})))()},receptCommonFromSearchCompent:function(e){console.log(e);var t=this.judgeIsHoleByName(e.label);if(t.isChecked)console.log("已显示过"),this.holeBillbordsLayer.remove(t.obj);else{var i=Number(e.longitude),a=Number(e.latitude),n=e.label,o=D["g"].fromDegrees(i,a);this.addHolePrimitive(this.holeBillbordsLayer,o,n),Ft.camera.flyTo({destination:D["g"].fromDegrees(i,a,500),orientation:{heading:D["B"].toRadians(0),pitch:D["B"].toRadians(-90),roll:0}})}},receptLayerItemFromSearchCompent:function(e){console.log(e),this.loadSelectWmsLayer(e.url,e.layer,e.label,e.cqlStr,e.active)},receptResetInfoEvent:function(e){if(0===e)this.holeBillbordsLayer.removeAll();else if(2===e){var t=this.layerIsExist_2("tempLayer");t.flag&&Et.remove(Et._layers[t.index])}},receptLayerSearchInfoFromSearchCompent:function(e,t){this.loadSelectWfsLayer(e,t)},judgeIsHoleByName:function(e){var t={isChecked:!1,obj:null};if(!this.holeBillbordsLayer)return t;for(var i=this.holeBillbordsLayer._billboards,a=0;a<i.length;a++)if(i[a].id===e){t.isChecked=!0,t.obj=i[a];break}return t},getLayerInfoFromLayerGroup:function(e){var t=this;this.$http.get("http://192.10.3.237/geoserver/crcc-dev/geomap-rs/wms?request=GetCapabilities&service=WMS&version=1.1.1").then((function(e){console.log(t.$x2js.xml2js(e.data))}))},loadTerrain:function(){if(console.log("viewer.scene.terrainProvider:",Ft.scene.terrainProvider),Ft.scene.terrainProvider.hasWaterMask){var e=new D["p"];Ft.terrainProvider=e}else{var t=new D["W"]({requestWaterMask:!0,requestVertexNormals:!0});Ft.terrainProvider=t}},loadTerrain_2:function(e,t){var i=Ft.scene,a=null;t?(a=new D["W"]({requestWaterMask:!0,requestVertexNormals:!0}),console.log(a)):a=new D["p"]({}),i.terrainProvider=a},pickFeatureFromScreen:function(e){var t={pickResult:null};return D["Y"](e)&&(t.pickResult=e,e.hasOwnProperty("id")&&e.id instanceof D["q"]?(t.type="Entity",t.detailType=e.primitive.constructor.name,t.entity=e.id,t.primitive=e.primitive):e.primitive instanceof D["j"]?t.type="Cesium3DTileset":e.primitive instanceof D["c"]?(t.type="Billboard",t.id=e.id,t.billboardCollection=e.collection,t.billboard=e.primitive):e.primitive instanceof D["J"]?(t.type="Primitive",t.primitive=e.primitive):e.primitive instanceof D["E"]&&(t.type="Primitive",t.detailType="Model",t.primitive=e.primitive)),t},setFeatureColor:function(e,t){if(D["Y"](e.feature)&&(e.feature.color=e.originalColor,e.feature=void 0,e.type=void 0,e.originalColor=new D["n"](0,0,0,0)),D["Y"](t)){var i=this.pickFeatureFromScreen(t);"Entity"===i.type?i.entity.model?(e.feature=i.entity.model,e.type=i.type,D["n"].clone(i.entity.model.color,e.originalColor),i.entity.model.color=D["n"].ORANGERED):(e.feature=i.primitive,e.type=i.type,D["n"].clone(i.primitive.color,e.originalColor),t.primitive.color=D["n"].ORANGERED):"Cesium3DTileset"===i.type?(e.feature=i.pickResult,e.type=i.type,D["n"].clone(i.pickResult.color,e.originalColor),t.color=D["n"].ORANGERED):"Billboard"===i.type?(e.feature=i.billboard,e.type=i.type,D["n"].clone(i.billboard.color,e.originalColor),i.billboard.color=D["n"].ORANGERED):"Primitive"===i.type&&(e.feature=i.primitive,e.type=i.type,D["n"].clone(i.primitive.color,e.originalColor),t.primitive.color=D["n"].ORANGERED)}},onMessageFromComponent:function(){},destroyMessage:function(){}},created:function(){this.onMessageFromComponent()},mounted:function(){this.initCesium(),this.registerOnclickEvent(),pe.$emit("sendCesiumViewer",Ft)},beforeDestroy:function(){this.destroyMessage(),Ft&&(Ft.isDestroyed()||Ft.destroy(),Ft=null),Pt=[]}},Vt=jt,Wt=(i("a786"),Object(r["a"])(Vt,te,ie,!1,null,"4e9e3b73",null)),Nt=Wt.exports,Ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"drawEntity_Box"},[i("div",{attrs:{id:"cesiumContainer"}}),i("drawTool")],1)},zt=[],Gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"drawToolBox"},e._l(e.DrawList,(function(t,a){return i("span",{key:a,on:{click:function(i){return e.drawParamsOnClick(t)}}},[e._v(" "+e._s(t.label)+" ")])})),0)},qt=[],Yt=new a["default"],$t={data:function(){return{DrawList:[{label:"绘制点",value:"point"},{label:"绘制线",value:"polyline"},{label:"绘制多边形",value:"polygon"},{label:"清除",value:"deleteDraw"}]}},components:{},methods:{drawParamsOnClick:function(e){Yt.$emit("sendDrawParams",e.value)}}},Xt=$t,Kt=(i("55d89"),Object(r["a"])(Xt,Gt,qt,!1,null,"9b6fc1e6",null)),Jt=Kt.exports,Zt=null,Qt={data:function(){return{drawTool:null,handler:null,pointsList:[]}},components:{drawTool:Jt},methods:{initCesium:function(){Zt=new D["R"]("cesiumContainer",{terrainProvider:D["W"](),infoBox:!1}),Zt.scene.globe.depthTestAgainstTerrain=!0},drawPoint:function(){var e=this;this.handler.setInputAction((function(t){var i=e.getCoordinateFXY(t.position);console.log(i),e.drawTool&&e.drawTool.drawPointEntity(i)}),D["M"].LEFT_CLICK),this.handler.setInputAction((function(e){}),D["M"].MOUSE_MOVE),this.handler.setInputAction((function(t){e.handler.destroy(),e.handler=null}),D["M"].RIGHT_CLICK)},drawLine:function(){var e=this;this.handler.setInputAction((function(t){var i=e.getCoordinateFXY(t.position);e.pointsList.push(i);var a=e.pointsList.length;e.drawTool.drawPointEntity(i),a>1&&e.drawTool.drawPolyLineEntity([e.pointsList[a-2],e.pointsList[a-1]])}),D["M"].LEFT_CLICK),this.handler.setInputAction((function(e){}),D["M"].MOUSE_MOVE),this.handler.setInputAction((function(t){e.handler.destroy(),e.handler=null,e.pointsList=[]}),D["M"].RIGHT_CLICK)},drawPolygon:function(){var e=this;this.handler.setInputAction((function(t){var i=e.getCoordinateFXY(t.position);e.pointsList.push(i);var a=e.pointsList.length;e.drawTool.drawPointEntity(i),a>1&&e.drawTool.drawPolyLineEntity([e.pointsList[a-2],e.pointsList[a-1]])}),D["M"].LEFT_CLICK),this.handler.setInputAction((function(e){}),D["M"].MOUSE_MOVE),this.handler.setInputAction((function(t){var i=e.getCoordinateFXY(t.position);if(i){var a=e.pointsList.length;a<3?alert("请选择3个以上的点再执行闭合操作命令"):(e.drawTool.drawPolyLineEntity([e.pointsList[a-1],e.pointsList[0]]),e.drawTool.drawPolygonEntity(e.pointsList),e.pointsList=[],e.handler.destroy(),e.handler=null)}}),D["M"].RIGHT_CLICK)},getCoordinateFXY:function(e){var t=Zt.camera.getPickRay(e),i=Zt.scene.globe.pick(t,Zt.scene);return i}},created:function(){var e=this;Yt.$on("sendDrawParams",(function(t){e.handler||(e.handler=new D["L"](Zt.scene.canvas)),e.drawTool||(e.drawTool=I.drawUtils(Zt)),e.pointsList.length>0&&(e.pointsList=[]),"deleteDraw"===t?(e.drawTool=null,Zt.entities.removeAll(),e.handler.destroy(),e.handler=null,e.pointsList=[]):"point"===t?e.drawPoint():"polyline"===t?e.drawLine():"polygon"===t&&e.drawPolygon()}))},mounted:function(){this.initCesium()},beforeDestroy:function(){Yt.$off("sendDrawParams")}},ei=Qt,ti=(i("9d5c"),Object(r["a"])(ei,Ut,zt,!1,null,"6671c630",null)),ii=ti.exports,ai=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"digTerrian_box"},[i("div",{attrs:{id:"cesiumContainer"}}),i("div",{staticClass:"ToolBox"},[i("el-input",{attrs:{placeholder:"输入挖掘深度",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.inputHeight,callback:function(t){e.inputHeight=t},expression:"inputHeight"}}),i("el-button",{on:{click:e.startDig}},[e._v("开始挖掘")])],1)])},ni=[],oi=null,ri={data:function(){return{inputHeight:"1000",handler:null,pointsList:[]}},components:{},methods:{initCesium:function(){oi=new D["R"]("cesiumContainer",{terrainProvider:D["W"]()}),this.drawTool=I.drawUtils(oi)},startDig:function(){var e=this,t=Number(this.inputHeight);this.handler||(this.handler=new D["L"](oi.scene.canvas)),oi.entities&&oi.entities.removeAll(),this.handler.setInputAction((function(t){var i=e.getCoordinateFXY(t.position);e.pointsList.push(i);var a=e.pointsList.length;e.drawTool.drawPointEntity(i),a>1&&e.drawTool.drawPolyLineEntity([e.pointsList[a-2],e.pointsList[a-1]])}),D["M"].LEFT_CLICK),this.handler.setInputAction((function(e){}),D["M"].MOUSE_MOVE),this.handler.setInputAction((function(i){var a=e.getCoordinateFXY(i.position);if(a){var n=e.pointsList.length;n<3?alert("请选择3个以上的点再执行闭合操作命令"):(e.drawTool.drawPolyLineEntity([e.pointsList[n-1],e.pointsList[0]]),oi.scene.highDynamicRangeSupported&&(oi.scene.highDynamicRange=!0),e.drawTool.drawTerrianDig(e.pointsList,{bottomMaterial:"material/excavate_bottom_min.jpg",wallMaterial:"material/excavate_bottom_min.jpg",height:t,lerpInterval:50}),e.pointsList=[],e.handler.destroy(),e.handler=null)}}),D["M"].RIGHT_CLICK)},getCoordinateFXY:function(e){var t=oi.camera.getPickRay(e),i=oi.scene.globe.pick(t,oi.scene);return i}},mounted:function(){this.initCesium()}},li=ri,si=(i("5593"),Object(r["a"])(li,ai,ni,!1,null,"fe98f166",null)),ci=si.exports,ui=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},di=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"MdlClip_box"},[i("div",{attrs:{id:"cesiumContainer"}})])}],mi={data:function(){return{initCesiumGoble:function(){new D["R"]("cesiumContanier")}}},components:{},mounted:function(){this.initCesiumGoble()}},pi=mi,hi=(i("03be"),Object(r["a"])(pi,ui,di,!1,null,"d36d999c",null)),vi=hi.exports,fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"TilesThree",attrs:{id:"TilesThree"}})},gi=[],yi=i("2517"),bi={data:function(){return{initFlag:0}},methods:{load3DTiles:function(){var e=A.initScene(document.getElementById("TilesThree")),t=e.scene,i=e.camera,a=e.renderer,n=e.controls,o=new M["k"](i);t.add(o);var r=new yi["a"]("http://10.101.140.3/CesiumData/3DTiles/north/tileset.json");r.displayBoxBounds=!0,r.displaySphereBounds=!0,r.displayActiveTiles=!0,r.onLoadModel=function(e){e.traverse((function(e){e.scale.set(1,1,1)}))},r.setCamera(i),r.setResolutionFromRenderer(i,a),t.add(r.group),this.animate(a,t,i,r,n)},animate:function(e,t,i,a,n){var o=this;requestAnimationFrame((function(){return o.animate(e,t,i,a,n)})),this.transLateMdl(a),n.update(),i.updateMatrixWorld(),a.update(),e.render(t,i)},transLateMdl:function(e){if(0===this.initFlag&&e.root){var t=A.getSphereCenter(e.root);e.group.position.set(-t.x,-t.y,-t.z),this.initFlag=1}}},components:{},mounted:function(){this.load3DTiles()}},wi=bi,Ci=(i("a6f6"),Object(r["a"])(wi,fi,gi,!1,null,"0afd9436",null)),Di=Ci.exports,_i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"TilesClip",attrs:{id:"3DTilesClipMap"}})},Si=[],ki={data:function(){return{}},components:{},methods:{init3Dtiles:function(){A.initScene(document.getElementById("3DTilesClipMap"))}},mounted:function(){this.init3Dtiles()}},xi=ki,Ti=(i("dfc5"),Object(r["a"])(xi,_i,Si,!1,null,"732b7f00",null)),Ii=Ti.exports,Mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cesiumContainer"},[i("div",{staticClass:"cesium_Container",attrs:{id:"cesiumContainer"}},[i("threeMdlCommonTool",{attrs:{isShow:e.isThreeTool},on:{cesiumToolHandleOnClick:e.cesiumToolEvent}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isAdjustHeightMdlTool,expression:"isAdjustHeightMdlTool"}],staticClass:"mdlHeight_box"},[i("el-slider",{attrs:{min:10,max:200,step:5,"show-stops":""},model:{value:e.scaleValue,callback:function(t){e.scaleValue=t},expression:"scaleValue"}})],1),e.isClipBoxShow?i("div",{staticClass:"controlGroup"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabOnClick}},[i("el-tab-pane",{attrs:{label:"平面切割"}},[i("div",[i("el-radio-group",{on:{change:e.changeClipValue},model:{value:e.clipPlaneVlaue,callback:function(t){e.clipPlaneVlaue=t},expression:"clipPlaneVlaue"}},[i("el-radio",{attrs:{label:1}},[e._v("X平面切割")]),i("el-radio",{attrs:{label:2}},[e._v("Y平面切割")]),i("el-radio",{attrs:{label:3}},[e._v("Z平面切割")])],1)],1),i("div",{staticClass:"slide_box"},[i("el-slider",{attrs:{min:e.minDistance,max:e.maxDistance,step:.001},on:{input:e.onSlide},model:{value:e.distancePlane,callback:function(t){e.distancePlane=t},expression:"distancePlane"}})],1),i("div",[i("el-checkbox",{on:{change:e.showPlaneOnChange},model:{value:e.showPlaneValue,callback:function(t){e.showPlaneValue=t},expression:"showPlaneValue"}},[e._v("只显示切面")]),i("el-checkbox",{on:{change:e.animateClipOnChange},model:{value:e.animatePlaneValue,callback:function(t){e.animatePlaneValue=t},expression:"animatePlaneValue"}},[e._v("动画展示")])],1)]),i("el-tab-pane",{attrs:{label:"自定义切割"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addPlaneRoute}},[e._v("画线")]),i("el-button",{attrs:{type:"primary"},on:{click:e.customStartClip}},[e._v("剖切")]),i("el-button",{attrs:{type:"primary"},on:{click:e.clearClip}},[e._v("清除")])],1)],1)],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMdlAlphaTool,expression:"isMdlAlphaTool"}],staticClass:"mdlAlpha_box"},[i("el-slider",{attrs:{min:0,max:1,step:.01,"show-stops":""},model:{value:e.alphaValue,callback:function(t){e.alphaValue=t},expression:"alphaValue"}})],1),i("div"),e.isMdlBlowShow?i("div",{staticClass:"mdlBlow_box"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.blastMdl}},[e._v("爆炸")]),i("el-button",{attrs:{size:"mini"},on:{click:e.restoreMdl}},[e._v("还原")])],1):e._e(),e.isLevelCtrlShow?i("div",{staticClass:"geoLevel_box"},[i("div",{staticStyle:{"margin-left":"10px","margin-top":"2px"}},[i("el-checkbox",{model:{value:e.levelAllChecked,callback:function(t){e.levelAllChecked=t},expression:"levelAllChecked"}},[e._v("全选")])],1),i("ul",{staticClass:"geoLevel_ul"},e._l(e.objGeoLevelList,(function(t,a){return i("li",{key:a},[i("el-checkbox",{on:{change:function(i){return e.geoMdlOnChange(t)}},model:{value:t.isChecked,callback:function(i){e.$set(t,"isChecked",i)},expression:"item.isChecked"}},[e._v(e._s(t.objName))])],1)})),0)]):e._e(),i("transition",{attrs:{name:"fade"}},[e.isGeoMdlShow?i("div",{staticClass:"geoMdlAttr_box"},[i("div",{staticClass:"geoMdlAttr_head_box"},[e._v(" 属性信息 "),i("span",{staticClass:"geoMdlAttr_close_span",on:{click:e.colseMdlBoxOnclick}},[e._v("×")])]),i("div",{staticClass:"geoMdlAttr_content_box"},[i("ul",[i("li",[i("div",[e._v("模型属性")]),i("div",[e._v("模型信息")])]),i("li",[i("div",[e._v("标准层号")]),i("div",[e._v(e._s(e.mdlAttrParam.layer_number))])]),i("li",[i("div",[e._v("地质时代")]),i("div",[e._v(e._s(e.mdlAttrParam.geo_age))])]),i("li",[i("div",[e._v("岩性名称")]),i("div",[e._v(e._s(e.mdlAttrParam.layer_naming))])]),i("li",[i("div",[e._v("标准编号")]),i("div",[e._v(e._s(e.mdlAttrParam.standard_number))])]),i("li",[i("div",[e._v("地层颜色")]),i("div",{style:{backgroundColor:e.mdlAttrParam.s3dm_stratclr}})])])])]):e._e()])],1)])},Ri=[],Ai=(i("3ca3"),i("ddb0"),i("4c53"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow?i("div",{staticClass:"threeTool"},[i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMenuTool,expression:"isMenuTool"}]},e._l(e.func3dList,(function(t,a){return i("span",{key:a,class:{activeSpan:!0===t.active},on:{click:function(i){return e.onClickCesiumTool(t)}}},[e._v(e._s(t.label))])})),0)]),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.contentTip,placement:"top-start"}},[i("span",{class:["el-icon-rank","close_span"],on:{click:e.closeTool}})])],1):e._e()}),Oi=[],Li={props:["isShow"],data:function(){return{isMenuTool:!0,contentTip:"关闭工具栏",func3dList:[{label:"线框/实体",index:1,active:!1},{label:"模型缩放(Z)",index:2,active:!1},{label:"模型爆炸",index:3,active:!1},{label:"模型透明度",index:8,active:!1},{label:"模型切割",index:4,active:!1},{label:"模型拾取",index:5,active:!1},{label:"模型层级显示",index:6,active:!1},{label:"模型复原",index:7,active:!1}],activeIndex:0,activeFlag:!1}},components:{},methods:{onClickCesiumTool:function(e){e.active=!e.active,this.$emit("cesiumToolHandleOnClick",e)},closeTool:function(){this.isMenuTool=!this.isMenuTool,this.isMenuTool?this.contentTip="关闭工具栏":this.contentTip="打开工具栏",this.isMenuTool||pe.$emit("sendToolClose",1)}},created:function(){var e=this;pe.$on("sendResetMdlInfo",(function(t){e.func3dList.forEach((function(e){e.active=t}))}))}},Pi=Li,Fi=(i("cc28"),Object(r["a"])(Pi,Ai,Oi,!1,null,"484b2802",null)),Ei=Fi.exports,Bi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isAdjustHeightMdl,expression:"isAdjustHeightMdl"}],staticClass:"mdlHeight_box"},[i("el-slider",{attrs:{min:10,max:100,step:5,"show-stops":""},model:{value:e.scaleValue,callback:function(t){e.scaleValue=t},expression:"scaleValue"}})],1)},Hi=[],ji={props:["isAdjustHeightMdl"],data:function(){return{scaleValue:20}},components:{}},Vi=ji,Wi=(i("1d4f"),Object(r["a"])(Vi,Bi,Hi,!1,null,"401333fb",null)),Ni=Wi.exports,Ui=i("4086"),zi=i("e642"),Gi=i("34ad"),qi=i("0ca5"),Yi=(i("ef20"),null),$i=null,Xi=null,Ki=null,Ji=null,Zi=[],Qi=null,ea=null,ta=[],ia=null,aa=null,na=null,oa={data:function(){return{isThreeTool:!1,isWireframe:!1,isAdjustHeightMdlTool:!1,isMdlBlowShow:!1,scaleValue:10,alphaValue:1,isClipBoxShow:!1,isPlaneShow:!1,isLevelCtrlShow:!1,isMdlAlphaTool:!1,isGeoMdlShow:!1,centerVec:null,distance:{x:10,y:10,z:10},distancePlane:120,minDistance:-120,maxDistance:120,mdlName:"",mouse:null,clipPlaneVlaue:1,showPlaneValue:!1,levelAllChecked:!0,animatePlaneValue:!1,flashTimeOut_1:null,flashTimeOut_2:null,flashTimeOut_3:null,selectPolyline:[],objGeoLevelList:[],treeProps:{label:"label",children:"children"},levelTreeData:[{label:"1-1",children:[{label:"1-1-1"}]}],animateIndex:1,moveSpeed:.1,mdlAttrParam:{layer_number:"",geo_age:"",layer_naming:"",standard_number:"",s3dm_stratclr:"rgb(255,0,0)"},objNameList:["Bu52","C1d","C1sx","C1y","C1z","C2h","D2ld","D2y","D3m","D3q","D3s","D3t","D3x","D3zd","H","Jxa","K1","K21","K22","ln51","P1g","P1m","P1q","P1x","P21g","P2c","P2l","P2w","Ptbn2j1","Ptbn2j2","Ptbn2j3","Ptbn2l1","Qh","Qnk1","Qnk2","Qns1","Qns2","qo51","Qpjx","T1qg","T1qy","T3s","T3sq1","T3sq2","T3z","yn51","yq51","yqn52","Zaj","Zb"]}},components:{threeMdlCommonTool:Ei,adjustMdlHeight:Ni},computed:{},watch:{levelAllChecked:function(e){this.objGeoLevelList.forEach((function(t){t.isChecked=e})),Ji.children.length>0&&Ji.children.forEach((function(t){t.visible=e}))},scaleValue:function(e){Ji&&Ji.scale.set(1,1,this.scaleValue/10),Qi&&Qi.scale.set(1,1,this.scaleValue/10)},alphaValue:function(e){var t=this;Ji&&Ji.traverse((function(e){e instanceof M["U"]&&(e.material.transparent=!0,e.material.opacity=t.alphaValue)}))},isWireframe:function(e){var t=this;Ji&&Ji.traverse((function(e){e instanceof M["U"]&&(e.material.wireframe=t.isWireframe)}))}},methods:{initScene:function(){var e=document.getElementById("cesiumContainer");$i=new M["hb"](45,e.clientWidth/e.clientHeight,.1,1e13),$i.position.set(180,0,4),$i.up.set(0,0,1),Yi=new M["vb"];var t=new M["b"](13421772,.6);Yi.add(t);var i=new M["p"](16777215,.6);$i.add(i),Yi.add($i),Xi=new M["Kb"]({antialias:!0,alpha:!0}),Xi.autoClear=!1,Xi.setPixelRatio(window.devicePixelRatio),Xi.setSize(e.clientWidth,e.clientHeight),Xi.setClearColor(2503224),Xi.localClippingEnabled=!0,Xi.logarithmicDepthBuffer=!0,Xi.gammaInput=!0,Xi.gammaOutput=!0,e.appendChild(Xi.domElement),Ki=new R["a"]($i,Xi.domElement),Ki.minDistance=.01},animate:function(){requestAnimationFrame(this.animate),Ki.update(),Xi.clear(),Xi.render(Yi,$i),this.lookAtPlane(),this.animatePlaneValue&&this.animatePlaneValue>=0&&(this.distancePlane-=.1,this.onSlide())},animateClipOnChange:function(e){},deleteGroup:function(e){if(0!==e.length)for(var t=0;t<e.length;t++)1===e[t]?Ji&&(Ji.traverse((function(e){e instanceof M["U"]&&(e.geometry.dispose(),e.material.dispose())})),Yi.remove(Ji)):2===e[t]?Qi&&(Qi.traverse((function(e){e instanceof M["U"]&&(e.geometry.dispose(),e.material.dispose())})),Yi.remove(Qi)):3===e[t]?ea&&(ea.traverse((function(e){e instanceof M["U"]&&(e.geometry.dispose(),e.material.dispose())})),Yi.remove(ea)):4===e[t]&&na&&(na.traverse((function(e){e instanceof M["U"]&&(e.geometry.dispose(),e.material.dispose())})),Yi.remove(na))},loadObjMdl:function(e,t){var i=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i.formatScene(),i.centerVec=null,n=regeneratorRuntime.mark((function a(n){var o,r,l,s,c,u,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t[n],a.next=3,(new Ui["a"]).setPath(e).loadAsync("".concat(o,".mtl"));case 3:return r=a.sent,a.next=6,(new zi["a"]).setMaterials(r).setPath(e).loadAsync("".concat(o,".obj"));case 6:l=a.sent,0===n&&(s=(new M["g"]).setFromObject(l),c=(s.min.x+s.max.x)/2,u=(s.min.y+s.max.y)/2,d=(s.min.z+s.max.z)/2,m=new M["Ib"](c,u,d),m.multiplyScalar(-1),i.centerVec=m.clone()),l.scale.set(.001,.001,.001),l.name=o,l.traverse((function(e){e instanceof M["U"]&&(e.geometry.translate(i.centerVec.x,i.centerVec.y,i.centerVec.z),e.geometry.name=o)})),ta.push({obj:l}),Ji.add(l);case 13:case"end":return a.stop()}}),a)})),o=0;case 4:if(!(o<t.length)){a.next=9;break}return a.delegateYield(n(o),"t0",6);case 6:o++,a.next=4;break;case 9:case"end":return a.stop()}}),a)})))()},loadGltfMdl:function(e,t){var i=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.formatScene(),n=new Gi["a"],o=new qi["a"],o.setDecoderPath("draco/gltf/"),o.setDecoderConfig({type:"js"}),n.setDRACOLoader(o),0!==t.length){a.next=8;break}return a.abrupt("return");case 8:n.load(e+t[0]+".gltf",(function(a){var o=a.scene,r=(new M["g"]).setFromObject(o),l=(r.min.x+r.max.x)/2,s=(r.min.y+r.max.y)/2,c=(r.min.z+r.max.z)/2,u=new M["Ib"](l,s,c);u.multiplyScalar(-1),i.centerVec=u.clone();for(var d=function(a){n.load(e+t[a]+".gltf",(function(e){var n=[],o=[],r=e.scene;r.name=t[a],r.traverse((function(e){e instanceof M["U"]&&(e.geometry.translate(i.centerVec.x,i.centerVec.y,i.centerVec.z),e.geometry.name=t[a],e.scale.set(.001,.001,.001),e.material.side=M["e"],n.push(e),o.push(e.material))})),ta.push({obj:r}),Ji.add(r)}))},m=0;m<t.length;m++)d(m)}));case 9:case"end":return a.stop()}}),a)})))()},formatScene:function(){this.deleteGroup([1,2,3,4]),Ji=new M["w"],ea=new M["w"],Qi=new M["w"],na=new M["w"],Yi.add(Ji),Yi.add(ea),Yi.add(Qi),Yi.add(na),ta=[],Zi=[]},initClipPlane:function(e){var t=[[]],i=null;switch(e){case 1:i=new M["ib"](new M["Ib"](-1,0,0),this.distancePlane);break;case 2:i=new M["ib"](new M["Ib"](0,-1,0),this.distancePlane);break;case 3:i=new M["ib"](new M["Ib"](0,0,-1),this.distancePlane);break;default:break}for(var a=0;a<ta.length;a++)t[0].push(i);Zi=t,ia=Zi.map((function(){return[]}))},clipMdl:function(){var e=this,t=[];Zi.forEach((function(e){t=t.concat(e)}));for(var i=function(i){for(var a=function(a){var n=ta[a].obj;n.traverse((function(e){e instanceof M["U"]&&(e.material.clippingPlanes=t,e.castShadow=!0,e.renderOrder=6)}));var o=new M["jb"](1e3,1e3),r=Zi[i][a];n.children.forEach((function(t){var i=t.geometry.clone(),n=e.createPlaneStencilGroup(i,r,a+2.2);n.scale.set(.001,.001,.001),Qi.add(n)}));var l=[];Zi.forEach((function(e,t){t!==i&&(l=l.concat(e))}));var s=new M["Y"]({color:n.children[0].material.color,clippingPlanes:l,stencilWrite:!0,stencilRef:0,stencilFunc:M["db"],stencilFail:M["ub"],stencilZFail:M["ub"],stencilZPass:M["ub"]}),c=new M["U"](o,s);c.onAfterRender=function(e){e.clearStencil()},c.renderOrder=a+2.2,ea.add(c),ia[i].push(c)},n=0;n<ta.length;n++)a(n)},a=0;a<Zi.length;a++)i(a)},createPlaneStencilGroup:function(e,t,i){var a=new M["w"],n=new M["V"];n.depthWrite=!1,n.depthTest=!1,n.colorWrite=!1,n.stencilWrite=!0,n.stencilFunc=M["a"];var o=n.clone();o.side=M["e"],o.clippingPlanes=[t],o.stencilFunc=M["a"],o.stencilFail=M["y"],o.stencilZFail=M["y"],o.stencilZPass=M["y"];var r=new M["U"](e,o);r.renderOrder=i,a.add(r);var l=n.clone();l.side=M["u"],l.clippingPlanes=[t],l.stencilFail=M["n"],l.stencilZFail=M["n"],l.stencilZPass=M["n"];var s=new M["U"](e,l);return s.renderOrder=i,a.add(s),a},lookAtPlane:function(){var e=function(){for(var e=0;e<Zi.length;e++)for(var t=0;t<ta.length;t++){var i=Zi[e][t],a=ia[e][t];if(!a)return;i.coplanarPoint(a.position),a.lookAt(a.position.x-i.normal.x,a.position.y-i.normal.y,a.position.z-i.normal.z)}};Zi.length>0&&e()},cesiumToolEvent:function(e){switch(e.index){case 1:this.isWireframe=!this.isWireframe;break;case 2:this.isAdjustHeightMdlTool=!this.isAdjustHeightMdlTool;break;case 3:this.isMdlBlowShow=!this.isMdlBlowShow;break;case 4:this.isClipBoxShow=!this.isClipBoxShow,this.isClipBoxShow?(this.initClipPlane(this.clipPlaneVlaue),this.clipMdl()):(this.deleteGroup([2,3]),ea=new M["w"],Qi=new M["w"],Yi.add(ea),Yi.add(Qi),Ji.traverse((function(e){e instanceof M["U"]&&(e.material.clippingPlanes="",e.castShadow=!0)})),Ji.visible=!0,Zi=[]);break;case 5:e.active?this.mdlSelect():Xi.domElement.removeEventListener("click",this.mouseDownOnclick);break;case 6:this.isLevelCtrlShow=!this.isLevelCtrlShow;break;case 7:this.resetMdl();break;case 8:this.isMdlAlphaTool=!this.isMdlAlphaTool,console.log(Ji);break;case 9:e.active?this.mdlMeasure():Xi.domElement.removeEventListener("dblclick",this.mdlMeasureOnclick);break;default:break}},mdlSelect:function(){aa=new M["sb"],this.mouse=new M["Hb"],Xi.domElement.addEventListener("click",this.mouseDownOnclick)},mouseDownOnclick:function(e){var t=document.getElementById("cesiumContainer");this.mouse.x=e.offsetX/t.clientWidth*2-1,this.mouse.y=-e.offsetY/t.clientHeight*2+1,aa.setFromCamera(this.mouse,$i);var i=aa.intersectObjects(Ji.children,!0);if(i.length>0){var a=i[0].object;this.mdlAttrParam.layer_number=a.geometry.name,this.mdlAttrParam.geo_age="",this.mdlAttrParam.layer_naming="",this.mdlAttrParam.standard_number="",this.mdlAttrParam.s3dm_stratclr="",this.isGeoMdlShow=!0;var n=a.material.color.clone();a.material.color.set("#00FF88"),this.flashTimeOut_1&&(clearTimeout(this.flashTimeOut_1),clearTimeout(this.flashTimeOut_2),clearTimeout(this.flashTimeOut_3),this.flashTimeOut_1=null,this.flashTimeOut_2=null,this.flashTimeOut_3=null),this.flashTimeOut_1=setTimeout((function(){a.material.color.set(n)}),100),this.flashTimeOut_2=setTimeout((function(){a.material.color.set("#00FF88")}),200),this.flashTimeOut_3=setTimeout((function(){a.material.color.set(n)}),300),a.material.needsUpdate=!0}},getRValue:function(e){var t=0,i=0,a=0;for(t=0;t<=255;t++)for(i=0;i<=255;i++)for(a=0;a<=255;a++)if(t+256*i+256*a*256===e)return"rgb("+t+","+i+","+a+")"},mdlMeasure:function(){aa=new M["sb"],this.mouse=new M["Hb"],this.selectPolyline=[],Xi.domElement.addEventListener("dblclick",this.mdlMeasureOnclick,!1)},mdlMeasureOnclick:function(e){var t=document.getElementById("cesiumContainer");this.mouse.x=e.offsetX/t.clientWidth*2-1,this.mouse.y=-e.offsetY/t.clientHeight*2+1,aa.setFromCamera(this.mouse,$i);var i=aa.intersectObjects(Ji.children,!0);if(i.length>0){console.log(i[0].point);var a=i[0].point;this.selectPolyline.push(a)}if(2===this.selectPolyline.length){var n=new M["G"]({color:255,width:2,depthTest:!0}),o=(new M["j"]).setFromPoints(this.selectPolyline),r=new M["F"](o,n);na.add(r),this.selectPolyline.shift()}},onSlideX:function(){var e=this;0!==Zi.length&&Zi[0].forEach((function(t){t.constant=e.distance.x}))},onSlideY:function(){var e=this;0!==Zi.length&&Zi[1].forEach((function(t){t.constant=e.distance.y}))},onSlideZ:function(){var e=this;0!==Zi.length&&Zi[2].forEach((function(t){t.constant=e.distance.z}))},onSlide:function(){var e=this;1===this.clipPlaneVlaue?0!==Zi.length&&Zi[0].forEach((function(t){t.constant=e.distancePlane})):(2===this.clipPlaneVlaue||3===this.clipPlaneVlaue)&&Zi[0].forEach((function(t){t.constant=e.distancePlane}))},addPlaneRoute:function(){aa=new M["sb"],this.mouse=new M["Hb"],this.selectPolyline=[],na&&Yi.remove(na),na=new M["w"],Yi.add(na),Xi.domElement.addEventListener("dblclick",this.addMdlRouteOnclick,!1)},addMdlRouteOnclick:function(e){var t=document.getElementById("cesiumContainer");this.mouse.x=e.offsetX/t.clientWidth*2-1,this.mouse.y=-e.offsetY/t.clientHeight*2+1,aa.setFromCamera(this.mouse,$i);var i=aa.intersectObjects(Ji.children,!0);if(i.length>0){var a=i[0].point;this.selectPolyline.push(a)}if(2===this.selectPolyline.length){var n=new M["Ib"](this.selectPolyline[1].x,this.selectPolyline[1].y,this.selectPolyline[1].z-1),o=this.selectPolyline[1].clone().sub(this.selectPolyline[0]).cross(n.sub(this.selectPolyline[0])).normalize();console.log("第一个向量坐标："+this.selectPolyline[0].x),console.log("第二个向量坐标："+this.selectPolyline[1].x),console.log("两点之间的向量1："+this.selectPolyline[1].clone().sub(this.selectPolyline[0]).x),console.log("两点之间的向量2："+o.x);var r=-this.selectPolyline[0].dot(o)/Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z),l=new M["ib"](new M["Ib"](o.x,o.y,o.z),r);Zi.push([]),ia=Zi.map((function(){return[]}));for(var s=0;s<ta.length;s++)Zi[Zi.length-1].push(l);var c=new M["G"]({color:255,depthTest:!0}),u=(new M["j"]).setFromPoints(this.selectPolyline),d=new M["F"](u,c);na.add(d),this.selectPolyline.shift()}},customStartClip:function(){Xi.domElement.removeEventListener("dblclick",this.addMdlRouteOnclick),0!==this.selectPolyline.length&&(Yi.remove(na),na=null,this.clipMdl(),Ji.visible=!1)},clearClip:function(){Xi.domElement.removeEventListener("dblclick",this.addMdlRouteOnclick),this.deleteGroup([2,3,4]),ea=new M["w"],Qi=new M["w"],Yi.add(ea),Yi.add(Qi),na=null,Ji.traverse((function(e){e instanceof M["U"]&&(e.material.clippingPlanes="",e.castShadow=!0)})),Ji.visible=!0,this.selectPolyline=[],Zi=[]},changeClipValue:function(e){switch(e){case 1:$i.position.set(180,0,4),$i.up.set(0,0,1),this.minDistance=-120,this.maxDistance=120,this.distancePlane=120;break;case 2:$i.position.set(0,180,4),$i.up.set(0,0,1),this.minDistance=-120,this.maxDistance=120,this.distancePlane=120;break;case 3:$i.position.set(0,-4,180),$i.up.set(0,0,1),this.minDistance=-5,this.maxDistance=10,this.distancePlane=10;break;default:break}ea&&Yi.remove(ea),Qi&&Yi.remove(Qi),ea=new M["w"],Qi=new M["w"],Yi.add(ea),Yi.add(Qi),Zi=[],this.distancePlane=120,this.initClipPlane(e),this.clipMdl()},blastMdl:function(){var e=this;this.moveSpeed=.1;var t=setInterval((function(){for(var i=parseInt(Ji.children.length/2),a=i,n=0;n<i;n++)Ji.children[n].position.z=a*e.moveSpeed,a--;a=i;for(var o=Ji.children.length-1;o>=i;o--)Ji.children[o].position.z=-a*e.moveSpeed,a--;e.moveSpeed+=.05,e.moveSpeed>=1&&clearInterval(t)}),80)},restoreMdl:function(){for(var e=Ji.children.length,t=0;t<e;t++)Ji.children[t].position.z=0},resetMdl:function(){this.restoreMdl(),this.isWireframe=!1,this.scaleValue=10,this.alphaValue=1,$i.position.set(0,0,180),this.distancePlane=120,Ji.traverse((function(e){e instanceof M["U"]&&(e.material.clippingPlanes="",e.castShadow=!0)})),Ji.visible=!0,this.deleteGroup([2,3]),ea=new M["w"],Qi=new M["w"],Yi.add(ea),Yi.add(Qi),Zi=[],this.selectPolyline=[],this.isClipBoxShow=!1,this.isMdlAlphaTool=!1,this.isAdjustHeightMdlTool=!1,this.isMdlBlowShow=!1,this.isLevelCtrlShow=!1,pe.$emit("sendResetMdlInfo",!1),Xi.domElement.removeEventListener("click",this.mouseDownOnclick),Xi.domElement.removeEventListener("dblclick",this.addMdlRouteOnclick)},geoMdlOnChange:function(e){Ji.children.length>0&&Ji.children.forEach((function(t){e.objName===t.name&&(t.visible=e.isChecked)}))},geoMdlIsShow:function(e){Ji.children.length>0&&Ji.children.forEach((function(t){t.visible=e}))},tabOnClick:function(e){this.deleteGroup([2,3,4]),ea=new M["w"],Qi=new M["w"],na=new M["w"],Yi.add(ea),Yi.add(Qi),Yi.add(na),Zi=[],ia=null,this.selectPolyline=[],Ji.traverse((function(e){e instanceof M["U"]&&(e.material.clippingPlanes="")})),Ji.visible=!0,"平面切割"===e.label&&(Xi.domElement.removeEventListener("dblclick",this.addMdlRouteOnclick),this.distancePlane=120,this.initClipPlane(this.clipPlaneVlaue),this.clipMdl())},showPlaneOnChange:function(e){Ji.visible=!e},colseMdlBoxOnclick:function(){this.mdlAttrParam.layer_number="",this.mdlAttrParam.geo_age="",this.mdlAttrParam.layer_naming="",this.mdlAttrParam.standard_number="",this.mdlAttrParam.s3dm_stratclr="",this.isGeoMdlShow=!1}},mounted:function(){this.initScene(),this.animate(),this.isThreeTool=!0,this.isClipBoxShow=!1,this.isAdjustHeightMdlTool=!1,this.isLevelCtrlShow=!1,this.clipPlaneVlaue=1,this.minDistance=-120,this.maxDistance=120,this.distancePlane=120;for(var e=[],t=0;t<this.objNameList.length;t++)e.push({objName:this.objNameList[t],isChecked:!0});this.objGeoLevelList=e,this.loadGltfMdl("dracoGltf/",this.objNameList)},created:function(){},beforeDestroy:function(){this.deleteGroup([1,2,3,4]),Zi=[],ta=[],Yi.dispose(),Ki.dispose();var e=Xi.domElement.getContext("webgl");e&&e.getExtension("WEBGL_lose_context").loseContext()}},ra=oa,la=(i("3303"),Object(r["a"])(ra,Mi,Ri,!1,null,"4bd4e5b1",null)),sa=la.exports;a["default"].use(u["a"]);var ca=[{path:"/",name:"Home",component:f,redirect:"/adjust3DTiles",children:[{path:"/helloCesium",component:F},{path:"/CesiumWedgit",component:W},{path:"/Geo3DTiles",component:$},{path:"/BIM3DTiles",component:ee},{path:"/adjust3DTiles",component:Nt},{path:"/drawEntity",component:ii},{path:"/digTerrian",component:ci},{path:"/3DTilesClip",component:vi},{path:"/load3DTilesByThree",component:Di},{path:"/threeClip3DTiles",component:Ii},{path:"/mdlScene",component:sa}]}],ua=new u["a"]({mode:"hash",base:"",routes:ca}),da=ua,ma=i("2f62");a["default"].use(ma["a"]);var pa=new ma["a"].Store({state:{tileModelTool:{scale:1,longitude:0,latitude:0,height:0,rotateX:0,rotateY:0,rotateZ:0}},getters:{getTileMdlTool:function(e){return e.tileModelTool}},mutations:{setTileMdlToolInfo:function(e,t){e.tileModelTool=t}},actions:{},modules:{}});i("0fae");a["default"].use(Lt["TimePicker"]),a["default"].use(Lt["Steps"]),a["default"].use(Lt["Step"]),a["default"].use(Lt["Divider"]),a["default"].use(Lt["Image"]),a["default"].use(Lt["Collapse"]),a["default"].use(Lt["CollapseItem"]),a["default"].use(Lt["Dropdown"]),a["default"].use(Lt["DropdownMenu"]),a["default"].use(Lt["DropdownItem"]),a["default"].use(Lt["Button"]),a["default"].use(Lt["Checkbox"]),a["default"].use(Lt["Table"]),a["default"].use(Lt["TableColumn"]),a["default"].use(Lt["ColorPicker"]),a["default"].use(Lt["Input"]),a["default"].use(Lt["Loading"]),a["default"].use(Lt["Tabs"]),a["default"].use(Lt["TabPane"]),a["default"].use(Lt["Radio"]),a["default"].use(Lt["Select"]),a["default"].use(Lt["Option"]),a["default"].use(Lt["Upload"]),a["default"].use(Lt["RadioGroup"]),a["default"].use(Lt["Tooltip"]),a["default"].use(Lt["Switch"]),a["default"].use(Lt["Tag"]),a["default"].use(Lt["DatePicker"]),a["default"].use(Lt["Upload"]),a["default"].use(Lt["Row"]),a["default"].use(Lt["Col"]),a["default"].use(Lt["Pagination"]),a["default"].use(Lt["Dialog"]),a["default"].use(Lt["Form"]),a["default"].use(Lt["FormItem"]),a["default"].use(Lt["Drawer"]),a["default"].use(Lt["Progress"]),a["default"].use(Lt["Cascader"]),a["default"].use(Lt["Aside"]),a["default"].use(Lt["Main"]),a["default"].use(Lt["Container"]),a["default"].use(Lt["Tree"]),a["default"].use(Lt["Breadcrumb"]),a["default"].use(Lt["BreadcrumbItem"]),a["default"].use(Lt["Menu"]),a["default"].use(Lt["MenuItem"]),a["default"].use(Lt["MenuItemGroup"]),a["default"].use(Lt["Submenu"]),a["default"].use(Lt["Card"]),a["default"].use(Lt["Slider"]),a["default"].use(Lt["InputNumber"]),a["default"].use(Lt["Autocomplete"]),a["default"].prototype.$message=Lt["Message"],a["default"].prototype.$confirm=Lt["MessageBox"].confirm,a["default"].prototype.$alert=Lt["MessageBox"].alert;i("150b"),i("6f8a"),i("b37a");var ha=i("bc3a"),va=i.n(ha),fa=i("98fc"),ga=i.n(fa),ya=i("7558"),ba=i.n(ya);a["default"].config.productionTip=!1,D["y"].defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkNmY0NTdiNi0yMWU0LTQ4ODYtOTI4ZC01YTNkMjBmOGJiNWIiLCJpZCI6MjU5LCJpYXQiOjE2MzU3ODA2MDR9.y50NF0p5ljbH7Tau2KiGsZdCNx0Icx905QiljL43nYM",va.a.defaults.baseURL="http://192.10.3.237:8383/tsy",a["default"].prototype.$http=va.a,a["default"].prototype.tiandituTk="59e1f33a85b33bcf1b27dea77be6b96d",a["default"].prototype.$x2js=new ga.a,a["default"].use(ba.a),new a["default"]({router:da,store:pa,render:function(e){return e(c)}}).$mount("#app")},"58ad":function(e,t,i){},"58da":function(e,t,i){},"60ab":function(e,t,i){},"64cb":function(e,t,i){},"6a60":function(e,t,i){e.exports=i.p+"static/img/blue.png"},"6cff":function(e,t,i){},"6e3d":function(e,t,i){},"710b":function(e,t,i){},"7c55":function(e,t,i){"use strict";i("2395")},"7f32":function(e,t,i){"use strict";i("982b")},"80db":function(e,t,i){},"85c6":function(e,t,i){"use strict";i("6e3d")},9371:function(e,t,i){"use strict";i("64cb")},"982b":function(e,t,i){},"9d5c":function(e,t,i){"use strict";i("0513")},a309:function(e,t,i){e.exports=i.p+"static/img/CRCC.png"},a55e:function(e,t,i){"use strict";i("f437")},a6f6:function(e,t,i){"use strict";i("03a6")},a786:function(e,t,i){"use strict";i("80db")},aaad:function(e,t,i){var a=i("8513"),n=a,o=Function("return this")();n.exportSymbol("proto.smart3dmap.v1.A3dDot",null,o),n.exportSymbol("proto.smart3dmap.v1.DummyHoleServiceReply",null,o),n.exportSymbol("proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo",null,o),n.exportSymbol("proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo",null,o),n.exportSymbol("proto.smart3dmap.v1.DummyHoleServiceRequest",null,o),proto.smart3dmap.v1.A3dDot=function(e){a.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.smart3dmap.v1.A3dDot,a.Message),n.DEBUG&&!COMPILED&&(proto.smart3dmap.v1.A3dDot.displayName="proto.smart3dmap.v1.A3dDot"),proto.smart3dmap.v1.DummyHoleServiceRequest=function(e){a.Message.initialize(this,e,0,-1,proto.smart3dmap.v1.DummyHoleServiceRequest.repeatedFields_,null)},n.inherits(proto.smart3dmap.v1.DummyHoleServiceRequest,a.Message),n.DEBUG&&!COMPILED&&(proto.smart3dmap.v1.DummyHoleServiceRequest.displayName="proto.smart3dmap.v1.DummyHoleServiceRequest"),proto.smart3dmap.v1.DummyHoleServiceReply=function(e){a.Message.initialize(this,e,0,-1,proto.smart3dmap.v1.DummyHoleServiceReply.repeatedFields_,null)},n.inherits(proto.smart3dmap.v1.DummyHoleServiceReply,a.Message),n.DEBUG&&!COMPILED&&(proto.smart3dmap.v1.DummyHoleServiceReply.displayName="proto.smart3dmap.v1.DummyHoleServiceReply"),proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo=function(e){a.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo,a.Message),n.DEBUG&&!COMPILED&&(proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.displayName="proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo"),proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo=function(e){a.Message.initialize(this,e,0,-1,proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.repeatedFields_,null)},n.inherits(proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo,a.Message),n.DEBUG&&!COMPILED&&(proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.displayName="proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo"),a.Message.GENERATE_TO_OBJECT&&(proto.smart3dmap.v1.A3dDot.prototype.toObject=function(e){return proto.smart3dmap.v1.A3dDot.toObject(e,this)},proto.smart3dmap.v1.A3dDot.toObject=function(e,t){var i={x:a.Message.getFloatingPointFieldWithDefault(t,1,0),y:a.Message.getFloatingPointFieldWithDefault(t,2,0),z:a.Message.getFloatingPointFieldWithDefault(t,3,0)};return e&&(i.$jspbMessageInstance=t),i}),proto.smart3dmap.v1.A3dDot.deserializeBinary=function(e){var t=new a.BinaryReader(e),i=new proto.smart3dmap.v1.A3dDot;return proto.smart3dmap.v1.A3dDot.deserializeBinaryFromReader(i,t)},proto.smart3dmap.v1.A3dDot.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup())break;var i=t.getFieldNumber();switch(i){case 1:var a=t.readDouble();e.setX(a);break;case 2:a=t.readDouble();e.setY(a);break;case 3:a=t.readDouble();e.setZ(a);break;default:t.skipField();break}}return e},proto.smart3dmap.v1.A3dDot.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.smart3dmap.v1.A3dDot.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smart3dmap.v1.A3dDot.serializeBinaryToWriter=function(e,t){var i=void 0;i=e.getX(),0!==i&&t.writeDouble(1,i),i=e.getY(),0!==i&&t.writeDouble(2,i),i=e.getZ(),0!==i&&t.writeDouble(3,i)},proto.smart3dmap.v1.A3dDot.prototype.getX=function(){return a.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.smart3dmap.v1.A3dDot.prototype.setX=function(e){return a.Message.setProto3FloatField(this,1,e)},proto.smart3dmap.v1.A3dDot.prototype.getY=function(){return a.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.smart3dmap.v1.A3dDot.prototype.setY=function(e){return a.Message.setProto3FloatField(this,2,e)},proto.smart3dmap.v1.A3dDot.prototype.getZ=function(){return a.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.smart3dmap.v1.A3dDot.prototype.setZ=function(e){return a.Message.setProto3FloatField(this,3,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.repeatedFields_=[5],a.Message.GENERATE_TO_OBJECT&&(proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.toObject=function(e){return proto.smart3dmap.v1.DummyHoleServiceRequest.toObject(e,this)},proto.smart3dmap.v1.DummyHoleServiceRequest.toObject=function(e,t){var i={mdlDbId:a.Message.getFieldWithDefault(t,1,0),mdlId:a.Message.getFieldWithDefault(t,2,0),dummyholeArcs:a.Message.getFieldWithDefault(t,3,0),dummyholeRadius:a.Message.getFloatingPointFieldWithDefault(t,4,0),rgnDotsList:a.Message.toObjectList(t.getRgnDotsList(),proto.smart3dmap.v1.A3dDot.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.smart3dmap.v1.DummyHoleServiceRequest.deserializeBinary=function(e){var t=new a.BinaryReader(e),i=new proto.smart3dmap.v1.DummyHoleServiceRequest;return proto.smart3dmap.v1.DummyHoleServiceRequest.deserializeBinaryFromReader(i,t)},proto.smart3dmap.v1.DummyHoleServiceRequest.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup())break;var i=t.getFieldNumber();switch(i){case 1:var a=t.readInt32();e.setMdlDbId(a);break;case 2:a=t.readInt32();e.setMdlId(a);break;case 3:a=t.readInt32();e.setDummyholeArcs(a);break;case 4:a=t.readDouble();e.setDummyholeRadius(a);break;case 5:a=new proto.smart3dmap.v1.A3dDot;t.readMessage(a,proto.smart3dmap.v1.A3dDot.deserializeBinaryFromReader),e.addRgnDots(a);break;default:t.skipField();break}}return e},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.smart3dmap.v1.DummyHoleServiceRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smart3dmap.v1.DummyHoleServiceRequest.serializeBinaryToWriter=function(e,t){var i=void 0;i=e.getMdlDbId(),0!==i&&t.writeInt32(1,i),i=e.getMdlId(),0!==i&&t.writeInt32(2,i),i=e.getDummyholeArcs(),0!==i&&t.writeInt32(3,i),i=e.getDummyholeRadius(),0!==i&&t.writeDouble(4,i),i=e.getRgnDotsList(),i.length>0&&t.writeRepeatedMessage(5,i,proto.smart3dmap.v1.A3dDot.serializeBinaryToWriter)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.getMdlDbId=function(){return a.Message.getFieldWithDefault(this,1,0)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.setMdlDbId=function(e){return a.Message.setProto3IntField(this,1,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.getMdlId=function(){return a.Message.getFieldWithDefault(this,2,0)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.setMdlId=function(e){return a.Message.setProto3IntField(this,2,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.getDummyholeArcs=function(){return a.Message.getFieldWithDefault(this,3,0)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.setDummyholeArcs=function(e){return a.Message.setProto3IntField(this,3,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.getDummyholeRadius=function(){return a.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.setDummyholeRadius=function(e){return a.Message.setProto3FloatField(this,4,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.getRgnDotsList=function(){return a.Message.getRepeatedWrapperField(this,proto.smart3dmap.v1.A3dDot,5)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.setRgnDotsList=function(e){return a.Message.setRepeatedWrapperField(this,5,e)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.addRgnDots=function(e,t){return a.Message.addToRepeatedWrapperField(this,5,e,proto.smart3dmap.v1.A3dDot,t)},proto.smart3dmap.v1.DummyHoleServiceRequest.prototype.clearRgnDotsList=function(){return this.setRgnDotsList([])},proto.smart3dmap.v1.DummyHoleServiceReply.repeatedFields_=[3],a.Message.GENERATE_TO_OBJECT&&(proto.smart3dmap.v1.DummyHoleServiceReply.prototype.toObject=function(e){return proto.smart3dmap.v1.DummyHoleServiceReply.toObject(e,this)},proto.smart3dmap.v1.DummyHoleServiceReply.toObject=function(e,t){var i={dummyholeDbId:a.Message.getFieldWithDefault(t,1,0),dummyholeId:a.Message.getFieldWithDefault(t,2,0),holeListList:a.Message.toObjectList(t.getHoleListList(),proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.smart3dmap.v1.DummyHoleServiceReply.deserializeBinary=function(e){var t=new a.BinaryReader(e),i=new proto.smart3dmap.v1.DummyHoleServiceReply;return proto.smart3dmap.v1.DummyHoleServiceReply.deserializeBinaryFromReader(i,t)},proto.smart3dmap.v1.DummyHoleServiceReply.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup())break;var i=t.getFieldNumber();switch(i){case 1:var a=t.readInt32();e.setDummyholeDbId(a);break;case 2:a=t.readInt32();e.setDummyholeId(a);break;case 3:a=new proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo;t.readMessage(a,proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.deserializeBinaryFromReader),e.addHoleList(a);break;default:t.skipField();break}}return e},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.smart3dmap.v1.DummyHoleServiceReply.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smart3dmap.v1.DummyHoleServiceReply.serializeBinaryToWriter=function(e,t){var i=void 0;i=e.getDummyholeDbId(),0!==i&&t.writeInt32(1,i),i=e.getDummyholeId(),0!==i&&t.writeInt32(2,i),i=e.getHoleListList(),i.length>0&&t.writeRepeatedMessage(3,i,proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.serializeBinaryToWriter)},a.Message.GENERATE_TO_OBJECT&&(proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.toObject=function(e){return proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.toObject(e,this)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.toObject=function(e,t){var i={topElevation:a.Message.getFloatingPointFieldWithDefault(t,1,0),bottomElevation:a.Message.getFloatingPointFieldWithDefault(t,2,0),stratCode:a.Message.getFieldWithDefault(t,3,"")};return e&&(i.$jspbMessageInstance=t),i}),proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.deserializeBinary=function(e){var t=new a.BinaryReader(e),i=new proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo;return proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.deserializeBinaryFromReader(i,t)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup())break;var i=t.getFieldNumber();switch(i){case 1:var a=t.readDouble();e.setTopElevation(a);break;case 2:a=t.readDouble();e.setBottomElevation(a);break;case 3:a=t.readString();e.setStratCode(a);break;default:t.skipField();break}}return e},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.serializeBinaryToWriter=function(e,t){var i=void 0;i=e.getTopElevation(),0!==i&&t.writeDouble(1,i),i=e.getBottomElevation(),0!==i&&t.writeDouble(2,i),i=e.getStratCode(),i.length>0&&t.writeString(3,i)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.getTopElevation=function(){return a.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.setTopElevation=function(e){return a.Message.setProto3FloatField(this,1,e)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.getBottomElevation=function(){return a.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.setBottomElevation=function(e){return a.Message.setProto3FloatField(this,2,e)},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.getStratCode=function(){return a.Message.getFieldWithDefault(this,3,"")},proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.prototype.setStratCode=function(e){return a.Message.setProto3StringField(this,3,e)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.repeatedFields_=[1],a.Message.GENERATE_TO_OBJECT&&(proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.toObject=function(e){return proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.toObject(e,this)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.toObject=function(e,t){var i={layerInfoListList:a.Message.toObjectList(t.getLayerInfoListList(),proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.deserializeBinary=function(e){var t=new a.BinaryReader(e),i=new proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo;return proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.deserializeBinaryFromReader(i,t)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.deserializeBinaryFromReader=function(e,t){while(t.nextField()){if(t.isEndGroup())break;var i=t.getFieldNumber();switch(i){case 1:var a=new proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo;t.readMessage(a,proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.deserializeBinaryFromReader),e.addLayerInfoList(a);break;default:t.skipField();break}}return e},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.serializeBinaryToWriter=function(e,t){var i=void 0;i=e.getLayerInfoListList(),i.length>0&&t.writeRepeatedMessage(1,i,proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo.serializeBinaryToWriter)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.getLayerInfoListList=function(){return a.Message.getRepeatedWrapperField(this,proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo,1)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.setLayerInfoListList=function(e){return a.Message.setRepeatedWrapperField(this,1,e)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.addLayerInfoList=function(e,t){return a.Message.addToRepeatedWrapperField(this,1,e,proto.smart3dmap.v1.DummyHoleServiceReply.LayerInfo,t)},proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo.prototype.clearLayerInfoListList=function(){return this.setLayerInfoListList([])},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.getDummyholeDbId=function(){return a.Message.getFieldWithDefault(this,1,0)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.setDummyholeDbId=function(e){return a.Message.setProto3IntField(this,1,e)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.getDummyholeId=function(){return a.Message.getFieldWithDefault(this,2,0)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.setDummyholeId=function(e){return a.Message.setProto3IntField(this,2,e)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.getHoleListList=function(){return a.Message.getRepeatedWrapperField(this,proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo,3)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.setHoleListList=function(e){return a.Message.setRepeatedWrapperField(this,3,e)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.addHoleList=function(e,t){return a.Message.addToRepeatedWrapperField(this,3,e,proto.smart3dmap.v1.DummyHoleServiceReply.HoleInfo,t)},proto.smart3dmap.v1.DummyHoleServiceReply.prototype.clearHoleListList=function(){return this.setHoleListList([])},n.object.extend(t,proto.smart3dmap.v1)},ad62:function(e,t,i){},b37a:function(e,t,i){},b5cf:function(e,t,i){},b75e:function(e,t,i){},b7a4:function(e,t,i){var a={};a.web=i("4f18");var n={smart3dmap:{}};n.smart3dmap.v1=i("aaad"),n.smart3dmap.v1.DummyHoleServiceClient=function(e,t,i){i||(i={}),i["format"]="text",this.client_=new a.web.GrpcWebClientBase(i),this.hostname_=e},n.smart3dmap.v1.DummyHoleServicePromiseClient=function(e,t,i){i||(i={}),i["format"]="text",this.client_=new a.web.GrpcWebClientBase(i),this.hostname_=e};var o=new a.web.MethodDescriptor("/smart3dmap.v1.DummyHoleService/CreateDummyHoles",a.web.MethodType.UNARY,n.smart3dmap.v1.DummyHoleServiceRequest,n.smart3dmap.v1.DummyHoleServiceReply,(function(e){return e.serializeBinary()}),n.smart3dmap.v1.DummyHoleServiceReply.deserializeBinary);new a.web.AbstractClientBase.MethodInfo(n.smart3dmap.v1.DummyHoleServiceReply,(function(e){return e.serializeBinary()}),n.smart3dmap.v1.DummyHoleServiceReply.deserializeBinary);n.smart3dmap.v1.DummyHoleServiceClient.prototype.createDummyHoles=function(e,t,i){return this.client_.rpcCall(this.hostname_+"/smart3dmap.v1.DummyHoleService/CreateDummyHoles",e,t||{},o,i)},n.smart3dmap.v1.DummyHoleServicePromiseClient.prototype.createDummyHoles=function(e,t){return this.client_.unaryCall(this.hostname_+"/smart3dmap.v1.DummyHoleService/CreateDummyHoles",e,t||{},o)},e.exports=n.smart3dmap.v1},bcfa:function(e,t,i){"use strict";i("58da")},c1dd:function(e,t,i){"use strict";i("4b6c")},c387:function(e,t,i){"use strict";i("b75e")},cc28:function(e,t,i){"use strict";i("e256")},cfd0:function(e,t,i){},d00f:function(e,t,i){"use strict";i("ff61")},d424:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAIAAAAn5KxJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADpSURBVGhD7dBBCoMwEIXh3v9YlWizc2/Aq3SYCWI1KtGHweb9i5BRRj58jQ+JUHSEoiMUHaHoCEVHKDpC0RGKjlB0Z6Dvy8UP5VQBNA6Znd6tBtr3fdM0ctp42Hw3q6tQUcpdThsPm+9mVc0fXTQMw0cLIcRHv+3s7oeEirJtW3vbdV3Sam/jkBMMOimdc3ZJWnW1HHRSyil38YlSxrVVVwtBF0p7uGXV1RLQpNJKWnX1duiO0lpbdfV2qPdeLltKa2HV1XuhV4ofyumvoUUiFB2h6AhFRyg6QtERio5QdISiIxTdQ6Dj+AUcgsVe2ARO8AAAAABJRU5ErkJggg=="},dae0:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAYAAAAEuLqPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAISklEQVRYw62Ya2wc1RXHf/fO7OzLu2tv7MR2TXAeKHEpbkoDLRWthJAaoKilaZFIk6ogQC2N0mC1UKp+aD4hEWgJ6iN9qS9qWqGUEKQiIG1oVVRQY0ESEI7JwyQkceLY691Z72N2Z+7th5l1bK8db4Dzbeaec/7/Oa977wgalLX9ugn4AnADsAZYBqSC5RwwDBwAXgb+PrBRTDbiVzQAvBL4voINOYd4vgJFFxwPPOXrGBLCBsRMSFiQClOQ8BfgkYGN4uj7IrC2X0eAbY5H39kiVqYMSjcWLSkgHYH2GJWwwQ7gRwMbRblhAmv79QoFu0YKrDlXgBqucMuIYgbp5BBeBbQXLBhow0KFU+hYGm1GppwviUNHnAMSbp8rGmIO8Ksdj+eP51hSdAMlx8awTyHdMkgTpOGbisBca0CD8kC5KDOCl+xCh5OAn5rlKc6FDW4Z2Chen5fA2n69sujy36NZ2qoK0Aoj+y5GOQuGFYDLaeA1cz2NhALlglfBizTjNXeDkIQkrGzmfMzkM9MjIaaBRx2PVw9P8HFXAcrFHBtCai8AlyAkC9etBq18Il4FJQzc1lUgTUwJq1s4FDb49MBGUQKQNTMF247lAnCtCI0NIbUCMwyGCcKoA99yXYr/3XdZfVaF4duYYWTgC61wFRzL0atg21TB1opupEBfKci5mR1GaA9M60K+5xC74DCSLc0TCeHbmhZCe5jZYQBKLowU6AvaGxPA8XjoXIFQreBkOQeh2BR4OirZduMietpCs6Kt0Fqx967OOviXjhZ59D9Z34dhIcs5hGOjw0nOFQi1RngIuEes7deJE3lGxkrEAcJjb6OV8plLgw29CbavW0Rr3OBS5M+vT3DPnkxA1AO3gpASp/WjALRGKVyeoEN6mlsyZR9cVAroatBqQtISkXxxVeSSwX3QaVNLSJAmulpGVAoAZMrEPc0t0q5wY23CWU4GZGiq1TJFlzv+eITbfnuYExnn0knMqAcJMuRj4E9Vu8KNpl2ht6ZmVCdx5bRWExKizbww7HDlIwdZmgpxZUdsXpiJosubZ4oAVIUFRlMdCaN6YY+yK/SaJZcVtReqWvEjIGZVvRnGNS0+1h3j6a91cjH566E8D75wnlxBzQqCP7hUtTL1quSyQjoeySkCyps14WaFsTb7LyJ39CY49J1uPtsdq7cXwscIxPFISk/xQZJbJ+MFlx889y6vHLcX1PUU2pSCU56mB8AwDLzaTJ8jCu9lqzy5//zUc9gUWIYk7/hfNTZZ5bGXzzDuRiAUnWXtV7phzOiok2bI4DXP9QlYlkWpqvwWEvUE3jhb5d5dp6aet1zfxtfXLuLaHYeDKEuwUhCSdbZof4+wLIva7LQMXjHjJnvLLncBWNEmSk4WjPqTR2fS5OqOOD2LW3nq4CSnbdefclpDJMmKdIj1V8YZOl/lwFmHk1m3PgJKYUWnSo6mEHvNpMWe8TI2kBSxNGTOgwqBIbEMyb3XJNm0JsEnOsKcy7u8drLIM2+pOoKWVFzdbrL5UynaEybvjFX59f4cvxmwcdxgd1RVRCwNfsbspMVz5vG7RdHcoZ/yNN/KizixaIRixQUpeXpDJzddEWN43OHmX77Nv47aaBmCcCLYJy7I4GiFDX86Ctrlc8sS/Oz25Tx2cyu3ro5z0+/fA+USi0bIi7hfC4Knjt8tChIgHeEngFtyIdXWBV4FlOKKtA9yfLzM/lEDHW+DaPMUuF1WjNhVn4E0/LVYK/vPS4bH/eZa2WJMnQ2SbV0EO66bjvBjppe6fFw/qWFTwoJY7jgT9iTdTS471i9j3eoWJsoezw8V2X/a4c2zDqMFj9xkEV11aG5poS1ucNUSi092Rrh1dYxFMYN/DGXp2z3MkZxBS7KJYmo5+QoI6Fd9YtMMAot26mWZMoNAeGmTIvfeICXHBdehK2Xw+dUtXNudomdJlI5kiFTEIBXxq912FHbZ43SuytBoif0nbF4czHAi6yKMMNFIiNRlPZyclABOOkLP+H1ieAaBIArbNTwgBaxIuIyeGKJU8fzwKheU52/V2gvaKugWEbSgMBBS+vrSBOURtQwWX76KY3kTpUHAo6pPPFjDnEGg/Vc6ca7IIPARU8KKpCJ39l0yE9n3dShNtzSTau/mmC1x/cY5vSRGz9lvivycBACsJ/SXq4pnwL9gdDVBzLUZOXOKUrk8Y7uuP5b7rRaNRGjv7KJkJjk1eeFCE5Ksr2wVu6fjzXnYE4/rXcBXas8JCzrjEPJK2NkM+bxN2amgPC9oAINI2CKRSJJsTlM1opwpQL4yw+3fdJ/4ah3WXATSv9BtEw5vAYunv4+Y0ByGpAURA8xg4roKyh7YFcg6UHbrXI62hLkq820x2hABgNAT+kuu4lk+BDElt1W3ij1zrcn5jAKDnR8C/s75wC9KAKAtyneBgx8A/GDgY15Z8P9A7Kd6ZcllgAs/IxqVXNTkmuIWceRiSnIhL8Ut4qgh+AYXbumNiDYEdy4E3hABAPd+sQfYfgkEtrv3i2cbUWyIAEB7nB8CLzag+lKg25AsWAPTJfVznbIrvAr+EW4OGUxaXJfbLHKN+mw0AiaQzm0WKXPfw1tR3kSdhvImzH0Pb81tFikgHdgsKAtd+kxgKdANtABx9c6+krF45WHd0bsOIXx7ravyjf7vubu2HAPige4SIAxMAmo+gIUIrMJvvxmp0od2nxHLrz/DouU3AHDkn9vU79b/e5atAGJAEhibD2ChGlgdfNHcxg8cuBNAP7rmDxfxUQQG3y8BE+jCz+klFSz+3MgApwB3PqVGnZr4oWwCokAoeFdLoReAVIESft7tiwHX5P/uMl/ToesiTQAAAABJRU5ErkJggg=="},dfc5:function(e,t,i){"use strict";i("04dc")},e156:function(e,t,i){},e256:function(e,t,i){},ec68:function(e,t,i){"use strict";i("01c5")},efb5:function(e,t,i){},f437:function(e,t,i){},ff61:function(e,t,i){}});